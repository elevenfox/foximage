var fluidPlayerScriptLocation=function(){var currentSrc="";if(document.currentScript){currentSrc=document.currentScript.src}else{currentSrc=function(){var scripts=document.getElementsByTagName("script"),script=scripts[scripts.length-1];if(script.getAttribute.length!==undefined){return script.src}return script.getAttribute("src",-1)}()}if(currentSrc){return currentSrc.substring(0,currentSrc.lastIndexOf("/")+1)}return""}();if(typeof Object.assign!="function"){Object.defineProperty(Object,"assign",{value:function assign(target,varArgs){"use strict";if(target==null){throw new TypeError("Cannot convert undefined or null to object")}var to=Object(target);for(var index=1;index<arguments.length;index++){var nextSource=arguments[index];if(nextSource!=null){for(var nextKey in nextSource){if(Object.prototype.hasOwnProperty.call(nextSource,nextKey)){to[nextKey]=nextSource[nextKey]}}}}return to},writable:true,configurable:true})}(function(){if(typeof window.CustomEvent==="function")return false;function CustomEvent(event,params){params=params||{bubbles:false,cancelable:false,detail:undefined};var evt=document.createEvent("CustomEvent");evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return evt}CustomEvent.prototype=window.Event.prototype;window.CustomEvent=CustomEvent})();fluidPlayer=function(idFilePlayer,options){var inArray=function(needle,haystack){var length=haystack.length;for(var i=0;i<length;i++){if(haystack[i]==needle){return true}}return false};var copy=fluidPlayerClass.constructor();for(var attr in fluidPlayerClass){if(fluidPlayerClass.hasOwnProperty(attr)&&!inArray(attr,fluidPlayerClass.notCloned)){copy[attr]=fluidPlayerClass[attr]}}fluidPlayerClass.instances.push(copy);copy.init(idFilePlayer,options);return copy};var fluidPlayerClass={hlsJsScript:"/scripts/hls.min.js",dashJsScript:"/scripts/dash.min.js",vttParserScript:"/scripts/webvtt.min.js",subtitlesParseScript:"/scripts/vtt.js",instances:[],notCloned:["notCloned","vttParserScript","instances","getInstanceById","requestStylesheet","reqiestScript","isTouchDevice","vastOptions","displayOptions","getEventOffsetX","getEventOffsetY","getTranslateX","toggleElementText","getMobileOs","findClosestParent","activeFilePlayerId","getInstanceIdByWrapperId","timer","timerPool","adList","adPool","isUserActive","isCurrentlyPlayingAd","initialAnimationSet"],version:"2.4.8",homepage:"https://www.fluidplayer.com/",activeFilePlayerId:null,getInstanceById:function(playerId){for(var i=0;i<this.instances.length;i++){if(this.instances[i].FilePlayerId===playerId){return this.instances[i]}}return null},getInstanceIdByWrapperId:function(wrapperId){return typeof wrapperId!="undefined"?wrapperId.replace("fluid_File_wrapper_",""):null},requestStylesheet:function(cssId,url){if(!document.getElementById(cssId)){var head=document.getElementsByTagName("head")[0];var link=document.createElement("link");link.id=cssId;link.rel="stylesheet";link.type="text/css";link.href=url;link.media="all";head.appendChild(link)}},requestScript:function(url,callback){var head=document.getElementsByTagName("head")[0];var script=document.createElement("script");script.type="text/javascript";script.src=url;script.onreadystatechange=callback;script.onload=callback;head.appendChild(script)},isTouchDevice:function(){return!!("ontouchstart"in window||navigator.maxTouchPoints)},getMobileOs:function(){var ua=navigator.userAgent;var uaindex;var result={device:false,userOs:false,userOsVer:false,userOsMajor:false};if(ua.match(/iPad/i)){result.device="iPad";result.userOs="iOS";uaindex=ua.indexOf("OS ")}else if(ua.match(/iPhone/i)){result.device="iPhone";result.userOs="iOS";uaindex=ua.indexOf("OS ")}else if(ua.match(/Android/i)){result.userOs="Android";uaindex=ua.indexOf("Android ")}else{result.userOs=false}if(result.userOs==="iOS"&&uaindex>-1){var userOsTemp=ua.substr(uaindex+3);var indexOfEndOfVersion=userOsTemp.indexOf(" ");if(indexOfEndOfVersion!==-1){result.userOsVer=userOsTemp.substring(0,userOsTemp.indexOf(" ")).replace(/_/g,".");result.userOsMajor=parseInt(result.userOsVer)}}else if(result.userOs==="Android"&&uaindex>-1){result.userOsVer=ua.substr(uaindex+8,3)}else{result.userOsVer=false}return result},getBrowserVersion:function(){var ua=navigator.userAgent;var result={browserName:false,fullVersion:false,majorVersion:false,userOsMajor:false};var idx,uaindex;try{result.browserName=navigator.appName;if((idx=ua.indexOf("OPR/"))!=-1){result.browserName="Opera";result.fullVersion=ua.substring(idx+4)}else if((idx=ua.indexOf("Opera"))!=-1){result.browserName="Opera";result.fullVersion=ua.substring(idx+6);if((idx=ua.indexOf("Version"))!=-1)result.fullVersion=ua.substring(idx+8)}else if((idx=ua.indexOf("MSIE"))!=-1){result.browserName="Microsoft Internet Explorer";result.fullVersion=ua.substring(idx+5)}else if((idx=ua.indexOf("Chrome"))!=-1){result.browserName="Google Chrome";result.fullVersion=ua.substring(idx+7)}else if((idx=ua.indexOf("Safari"))!=-1){result.browserName="Safari";result.fullVersion=ua.substring(idx+7);if((idx=ua.indexOf("Version"))!=-1)result.fullVersion=ua.substring(idx+8)}else if((idx=ua.indexOf("Firefox"))!=-1){result.browserName="Mozilla Firefox";result.fullVersion=ua.substring(idx+8)}else if((uaindex=ua.lastIndexOf(" ")+1)<(idx=ua.lastIndexOf("/"))){result.browserName=ua.substring(uaindex,idx);result.fullVersion=ua.substring(idx+1);if(result.browserName.toLowerCase()==result.browserName.toUpperCase()){result.browserName=navigator.appName}}if((uaindex=result.fullVersion.indexOf(";"))!=-1){result.fullVersion=result.fullVersion.substring(0,uaindex)}if((uaindex=result.fullVersion.indexOf(" "))!=-1){result.fullVersion=result.fullVersion.substring(0,uaindex)}result.majorVersion=parseInt(""+result.fullVersion,10);if(isNaN(result.majorVersion)){result.fullVersion=""+parseFloat(navigator.appVersion);result.majorVersion=parseInt(navigator.appVersion,10)}}catch(e){}return result},getCurrentFileDuration:function(){var FilePlayerTag=document.getElementById(this.FilePlayerId);if(FilePlayerTag){return FilePlayerTag.duration}return 0},getClickThroughUrlFromLinear:function(linear){var FileClicks=linear.getElementsByTagName("FileClicks");if(FileClicks.length){var clickThroughs=FileClicks[0].getElementsByTagName("ClickThrough");if(clickThroughs.length){return this.extractNodeData(clickThroughs[0])}}return false},getVastAdTagUriFromWrapper:function(xmlResponse){var wrapper=xmlResponse.getElementsByTagName("Wrapper");if(typeof wrapper!=="undefined"&&wrapper.length){var vastAdTagURI=wrapper[0].getElementsByTagName("VASTAdTagURI");if(vastAdTagURI.length){return this.extractNodeData(vastAdTagURI[0])}}return false},hasInLine:function(xmlResponse){var inLine=xmlResponse.getElementsByTagName("InLine");return typeof inLine!=="undefined"&&inLine.length},hasVastAdTagUri:function(xmlResponse){var vastAdTagURI=xmlResponse.getElementsByTagName("VASTAdTagURI");return typeof vastAdTagURI!=="undefined"&&vastAdTagURI.length},getClickThroughUrlFromNonLinear:function(nonLinear){var result="";var nonLinears=nonLinear.getElementsByTagName("NonLinear");if(nonLinears.length){var nonLinearClickThrough=nonLinear.getElementsByTagName("NonLinearClickThrough");if(nonLinearClickThrough.length){result=this.extractNodeData(nonLinearClickThrough[0])}}return result},getTrackingFromLinear:function(linear){var trackingEvents=linear.getElementsByTagName("TrackingEvents");if(trackingEvents.length){return trackingEvents[0].getElementsByTagName("Tracking")}return[]},getDurationFromLinear:function(linear){var duration=linear.getElementsByTagName("Duration");if(duration.length&&typeof duration[0].childNodes[0]!=="undefined"){var nodeDuration=this.extractNodeData(duration[0]);return this.convertTimeStringToSeconds(nodeDuration)}return false},getDurationFromNonLinear:function(tag){var result=0;var nonLinear=tag.getElementsByTagName("NonLinear");if(nonLinear.length&&typeof nonLinear[0].getAttribute("minSuggestedDuration")!=="undefined"){result=this.convertTimeStringToSeconds(nonLinear[0].getAttribute("minSuggestedDuration"))}return result},getDimensionFromNonLinear:function(tag){var result={width:null,height:null};var nonLinear=tag.getElementsByTagName("NonLinear");if(nonLinear.length){if(typeof nonLinear[0].getAttribute("width")!=="undefined"){result.width=nonLinear[0].getAttribute("width")}if(typeof nonLinear[0].getAttribute("height")!=="undefined"){result.height=nonLinear[0].getAttribute("height")}}return result},getCreativeTypeFromStaticResources:function(tag){var result="";var nonLinears=tag.getElementsByTagName("NonLinear");if(nonLinears.length&&typeof nonLinears[0].childNodes[0]!=="undefined"){result=nonLinears[0].getElementsByTagName("StaticResource")[0].getAttribute("creativeType")}return result.toLowerCase()},getMediaFilesFromLinear:function(linear){var mediaFiles=linear.getElementsByTagName("MediaFiles");if(mediaFiles.length){return mediaFiles[0].getElementsByTagName("MediaFile")}return[]},getStaticResourcesFromNonLinear:function(linear){var result=[];var nonLinears=linear.getElementsByTagName("NonLinear");if(nonLinears.length){result=nonLinears[0].getElementsByTagName("StaticResource")}return result},extractNodeData:function(parentNode){var contentAsString="";for(var n=0;n<parentNode.childNodes.length;n++){var child=parentNode.childNodes[n];if(child.nodeType===8||child.nodeType===3&&/^\s*$/.test(child.nodeValue)){}else{contentAsString+=child.nodeValue}}var tidyString=contentAsString.replace(/(^\s+|\s+$)/g,"");return tidyString},getMediaFileListFromLinear:function(linear){var mediaFileList=[];var mediaFiles=this.getMediaFilesFromLinear(linear);if(mediaFiles.length){for(var n=0;n<mediaFiles.length;n++){mediaFileList.push({src:this.extractNodeData(mediaFiles[n]),type:mediaFiles[n].getAttribute("type")})}}return mediaFileList},getIconClickThroughFromLinear:function(linear){var iconClickThrough=linear.getElementsByTagName("IconClickThrough");if(iconClickThrough.length){return this.extractNodeData(iconClickThrough[0])}else{this.displayOptions.vastOptions.adCTAText=false}return""},getStaticResourceFromNonLinear:function(linear){var fallbackStaticResource;var staticResources=this.getStaticResourcesFromNonLinear(linear);for(var i=0;i<staticResources.length;i++){if(!staticResources[i].getAttribute("type")){fallbackStaticResource=this.extractNodeData(staticResources[i])}if(staticResources[i].getAttribute("type")===this.displayOptions.staticResource){return this.extractNodeData(staticResources[i])}}return fallbackStaticResource},registerTrackingEvents:function(creativeLinear,tmpOptions){var trackingEvents=this.getTrackingFromLinear(creativeLinear);var eventType="";var oneEventOffset=0;for(var i=0;i<trackingEvents.length;i++){eventType=trackingEvents[i].getAttribute("event");switch(eventType){case"start":case"firstQuartile":case"midpoint":case"thirdQuartile":case"complete":if(typeof tmpOptions.tracking[eventType]==="undefined"){tmpOptions.tracking[eventType]=[]}if(typeof tmpOptions.stopTracking[eventType]==="undefined"){tmpOptions.stopTracking[eventType]=[]}tmpOptions.tracking[eventType].push(trackingEvents[i].childNodes[0].nodeValue);tmpOptions.stopTracking[eventType]=false;break;case"progress":if(typeof tmpOptions.tracking[eventType]==="undefined"){tmpOptions.tracking[eventType]=[]}oneEventOffset=this.convertTimeStringToSeconds(trackingEvents[i].getAttribute("offset"));if(typeof tmpOptions.tracking[eventType][oneEventOffset]==="undefined"){tmpOptions.tracking[eventType][oneEventOffset]={elements:[],stopTracking:false}}tmpOptions.tracking[eventType][oneEventOffset].elements.push(trackingEvents[i].childNodes[0].nodeValue);break;default:break}}},registerClickTracking:function(clickTrackingTag,tmpOptions){if(clickTrackingTag.length){for(var i=0;i<clickTrackingTag.length;i++){if(clickTrackingTag[i]!=""){tmpOptions.clicktracking.push(clickTrackingTag[i])}}}},registerImpressionEvents:function(impressionTags,tmpOptions){if(impressionTags.length){for(var i=0;i<impressionTags.length;i++){var impressionEvent=this.extractNodeData(impressionTags[i]);tmpOptions.impression.push(impressionEvent)}}},registerErrorEvents:function(errorTags,tmpOptions){if(typeof errorTags!=="undefined"&&errorTags!==null&&errorTags.length===1&&errorTags[0].childNodes.length===1){tmpOptions.errorUrl=errorTags[0].childNodes[0].nodeValue}},announceError:function(code){if(typeof this.vastOptions.errorUrl==="undefined"||!this.vastOptions.errorUrl){return}if(typeof code!=="undefined"){code=parseInt(code)}else{code=900}var errorUrl=this.vastOptions.errorUrl.replace("[ERRORCODE]",code);this.callUris([errorUrl])},announceLocalError:function(code,msg){if(typeof code!=="undefined"){code=parseInt(code)}else{code=900}message="[Error] ("+code+"): ";message+=!msg?"Failed to load Vast":msg;console.log(message)},getClickTrackingEvents:function(linear){var result=[];var FileClicks=linear.getElementsByTagName("FileClicks");if(FileClicks.length){var clickTracking=FileClicks[0].getElementsByTagName("ClickTracking");if(clickTracking.length){for(var i=0;i<clickTracking.length;i++){var clickTrackingEvent=this.extractNodeData(clickTracking[i]);result.push(clickTrackingEvent)}}}return result},getNonLinearClickTrackingEvents:function(nonLinear){var result=[];var nonLinears=nonLinear.getElementsByTagName("NonLinear");if(nonLinears.length){var clickTracking=nonLinear.getElementsByTagName("NonLinearClickTracking");if(clickTracking.length){for(var i=0;i<clickTracking.length;i++){var NonLinearClickTracking=this.extractNodeData(clickTracking[i]);result.push(NonLinearClickTracking)}}}return result},callUris:function(uris){for(var i=0;i<uris.length;i++){(new Image).src=uris[i]}},recalculateAdDimensions:function(idFilePlayer){if(!idFilePlayer&&typeof this.FilePlayerId!=="undefined"){var idFilePlayer=this.FilePlayerId}var FilePlayer=document.getElementById(idFilePlayer);var divClickThrough=document.getElementById("vast_clickthrough_layer_"+idFilePlayer);if(divClickThrough){divClickThrough.style.width=FilePlayer.offsetWidth+"px";divClickThrough.style.height=FilePlayer.offsetHeight+"px"}var requestFullscreenFunctionNames=this.checkFullscreenSupport("fluid_File_wrapper_"+idFilePlayer);var fullscreenButton=document.getElementById(idFilePlayer+"_fluid_control_fullscreen");var menuOptionFullscreen=document.getElementById(idFilePlayer+"context_option_fullscreen");if(requestFullscreenFunctionNames){if(document[requestFullscreenFunctionNames.isFullscreen]===null){this.fullscreenOff(fullscreenButton,menuOptionFullscreen)}else{this.fullscreenOn(fullscreenButton,menuOptionFullscreen)}}else{if(fullscreenTag.className.search(/\bpseudo_fullscreen\b/g)!==-1){fullscreenTag.className+=" pseudo_fullscreen";this.fullscreenOn(fullscreenButton,menuOptionFullscreen)}else{fullscreenTag.className=fullscreenTag.className.replace(/\bpseudo_fullscreen\b/g,"");this.fullscreenOff(fullscreenButton,menuOptionFullscreen)}}},prepareVast:function(roll){var player=this;var FilePlayerTag=document.getElementById(this.FilePlayerId);var list=[];list.length=0;list=player.findRoll(roll);for(var i=0;i<list.length;i++){var adListId=list[i];if(player.adList[adListId].vastLoaded!==true&&player.adList[adListId].error!==true){player.processVastWithRetries(player.adList[adListId]);FilePlayerTag.addEventListener("adId_"+adListId,player[roll])}}},toggleLoader:function(showLoader){var player=this;if(showLoader){player.isLoading=true}else{player.isLoading=false}var loaderDiv=document.getElementById("vast_File_loading_"+this.FilePlayerId);if(showLoader){loaderDiv.style.display="table"}else{loaderDiv.style.display="none"}},sendRequest:function(url,withCredentials,timeout,functionReadyStateChange){var xmlHttpReq=new XMLHttpRequest;xmlHttpReq.onreadystatechange=functionReadyStateChange;xmlHttpReq.open("GET",url,true);xmlHttpReq.withCredentials=withCredentials;xmlHttpReq.timeout=timeout;xmlHttpReq.send()},playMainFileWhenVastFails:function(errorCode){var player=this;var FilePlayerTag=document.getElementById(player.FilePlayerId);FilePlayerTag.removeEventListener("loadedmetadata",player.switchPlayerToVastMode);FilePlayerTag.pause();player.toggleLoader(false);player.displayOptions.vastOptions.vastAdvanced.noVastFileCallback();if(!player.vastOptions||typeof this.vastOptions.errorUrl==="undefined"){player.announceLocalError(errorCode)}else{player.announceError(errorCode)}player.switchToMainFile()},switchPlayerToVastMode:function(){},processVastXml:function(xmlResponse,tmpOptions,callBack){var player=this;if(!xmlResponse){callBack(false);return}var impression=xmlResponse.getElementsByTagName("Impression");if(impression!==null){player.registerImpressionEvents(impression,tmpOptions)}var errorTags=xmlResponse.getElementsByTagName("Error");if(errorTags!==null){player.registerErrorEvents(errorTags,tmpOptions)}var creative=xmlResponse.getElementsByTagName("Creative");if(typeof creative!=="undefined"&&creative.length){var arrayCreativeLinears=creative[0].getElementsByTagName("Linear");if(typeof arrayCreativeLinears!=="undefined"&&arrayCreativeLinears!==null&&arrayCreativeLinears.length){var creativeLinear=arrayCreativeLinears[0];player.registerTrackingEvents(creativeLinear,tmpOptions);var clickTracks=player.getClickTrackingEvents(creativeLinear);player.registerClickTracking(clickTracks,tmpOptions);if(!player.hasVastAdTagUri(xmlResponse)&&player.hasInLine(xmlResponse)){tmpOptions.adFinished=false;tmpOptions.adType="linear";tmpOptions.skipoffset=player.convertTimeStringToSeconds(creativeLinear.getAttribute("skipoffset"));tmpOptions.clickthroughUrl=player.getClickThroughUrlFromLinear(creativeLinear);tmpOptions.duration=player.getDurationFromLinear(creativeLinear);tmpOptions.mediaFileList=player.getMediaFileListFromLinear(creativeLinear);tmpOptions.iconClick=player.getIconClickThroughFromLinear(creativeLinear)}}var arrayCreativeNonLinears=creative[0].getElementsByTagName("NonLinearAds");if(typeof arrayCreativeNonLinears!=="undefined"&&arrayCreativeNonLinears!==null&&arrayCreativeNonLinears.length){var creativeNonLinear=arrayCreativeNonLinears[0];player.registerTrackingEvents(creativeNonLinear,tmpOptions);var clickTracks=player.getNonLinearClickTrackingEvents(creativeNonLinear);player.registerClickTracking(clickTracks,tmpOptions);if(!player.hasVastAdTagUri(xmlResponse)&&player.hasInLine(xmlResponse)){tmpOptions.adType="nonLinear";tmpOptions.clickthroughUrl=player.getClickThroughUrlFromNonLinear(creativeNonLinear);tmpOptions.duration=player.getDurationFromNonLinear(creativeNonLinear);tmpOptions.dimension=player.getDimensionFromNonLinear(creativeNonLinear);tmpOptions.staticResource=player.getStaticResourceFromNonLinear(creativeNonLinear);tmpOptions.creativeType=player.getCreativeTypeFromStaticResources(creativeNonLinear)}}if(!player.hasVastAdTagUri(xmlResponse)&&player.hasInLine(xmlResponse)){if(typeof tmpOptions.mediaFileList!=="undefined"||typeof tmpOptions.staticResource!=="undefined"){callBack(true,tmpOptions)}else{callBack(false)}}}else{callBack(false)}},processVastWithRetries:function(vastObj){var player=this;var vastTag=vastObj.vastTag;var adListId=vastObj.id;var handleVastResult=function(pass,tmpOptions){if(pass){if(tmpOptions.adType==="linear"){if(typeof tmpOptions.iconClick!=="undefined"&&tmpOptions.iconClick!==null&&tmpOptions.iconClick.length){player.adList[adListId].landingPage=tmpOptions.iconClick}}player.adList[adListId].adType=tmpOptions.adType?tmpOptions.adType:"unknown";player.adList[adListId].vastLoaded=true;player.adPool[adListId]=Object.assign({},tmpOptions);var event=document.createEvent("Event");event.initEvent("adId_"+adListId,false,true);document.getElementById(player.FilePlayerId).dispatchEvent(event);player.displayOptions.vastOptions.vastAdvanced.vastLoadedCallback();if(player.hasTitle()){var title=document.getElementById(player.FilePlayerId+"_title");title.style.display="none"}}else{player.stopProcessAndReportError(vastTag);if(vastObj.hasOwnProperty("fallbackVastTags")&&vastObj.fallbackVastTags.length>0){vastTag=vastObj.fallbackVastTags.shift();player.processUrl(vastTag,handleVastResult)}else{if(vastObj.roll==="preRoll"){player.preRollFail(vastObj)}player.adList[adListId].error=true}}};player.processUrl(vastTag,handleVastResult)},processUrl:function(vastTag,callBack){var player=this;var numberOfRedirects=0;var tmpOptions={tracking:[],stopTracking:[],impression:[],clicktracking:[],vastLoaded:false};player.resolveVastTag(vastTag,numberOfRedirects,tmpOptions,callBack)},resolveVastTag:function(vastTag,numberOfRedirects,tmpOptions,callBack){var player=this;if(!vastTag||vastTag==""){callBack(false);return}var handleXmlHttpReq=function(){var xmlHttpReq=this;if(xmlHttpReq.readyState===4&&xmlHttpReq.status===404){callBack(false);return}if(xmlHttpReq.readyState===4&&xmlHttpReq.status===0){callBack(false);return}if(!(xmlHttpReq.readyState===4&&xmlHttpReq.status===200)){return}if(xmlHttpReq.readyState===4&&xmlHttpReq.status!==200){callBack(false);return}try{var xmlResponse=xmlHttpReq.responseXML}catch(e){callBack(false);return}if(!xmlResponse){callBack(false);return}player.inLineFound=player.hasInLine(xmlResponse);if(!player.inLineFound&&player.hasVastAdTagUri(xmlResponse)){var vastAdTagUri=player.getVastAdTagUriFromWrapper(xmlResponse);if(vastAdTagUri){player.resolveVastTag(vastAdTagUri,numberOfRedirects,tmpOptions,callBack)}else{callBack(false);return}}if(numberOfRedirects>player.displayOptions.vastOptions.maxAllowedVastTagRedirects&&!player.inLineFound){callBack(false);return}player.processVastXml(xmlResponse,tmpOptions,callBack)};if(numberOfRedirects<=player.displayOptions.vastOptions.maxAllowedVastTagRedirects){player.sendRequest(vastTag,true,player.displayOptions.vastOptions.vastTimeout,handleXmlHttpReq)}numberOfRedirects++},stopProcessAndReportError:function(vastTag){var player=this;player.announceLocalError(101)},backupMainFileContentTime:function(adListId){var player=this;var FilePlayerTag=document.getElementById(player.FilePlayerId);var roll=player.adList[adListId].roll;switch(roll){case"midRoll":FilePlayerTag.mainFileCurrentTime=FilePlayerTag.currentTime-1;break;case"postRoll":FilePlayerTag.mainFileCurrentTime=0;player.autoplayAfterAd=false;FilePlayerTag.currentTime=player.mainFileDuration;break}},renderFileAd:function(adListId,backupTheFileTime){var player=this;var FilePlayerTag=document.getElementById(player.FilePlayerId);player.toggleLoader(true);player.vastOptions=player.adPool[adListId];if(backupTheFileTime){player.backupMainFileContentTime(adListId)}var playFilePlayer=function(adListId){player.switchPlayerToVastMode=function(){if(!player.vastOptions.duration){player.vastOptions.duration=FilePlayerTag.duration}var addClickthroughLayer=typeof player.adList[adListId].adClickable!="undefined"?player.adList[adListId].adClickable:player.displayOptions.vastOptions.adClickable;if(addClickthroughLayer){player.addClickthroughLayer(player.FilePlayerId)}if(player.vastOptions.skipoffset!==false){player.addSkipButton()}FilePlayerTag.loop=false;player.addCTAButton(player.adList[adListId].landingPage);player.addAdCountdown();FilePlayerTag.removeAttribute("controls");player.vastLogoBehaviour(true);var progressbarContainer=document.getElementById(player.FilePlayerId+"_fluid_controls_progress_container");if(progressbarContainer!==null){document.getElementById(player.FilePlayerId+"_vast_control_currentprogress").style.backgroundColor=player.displayOptions.layoutControls.adProgressColor}if(player.displayOptions.vastOptions.adText||player.adList[adListId].adText){var adTextToShow=player.adList[adListId].adText!==null?player.adList[adListId].adText:player.displayOptions.vastOptions.adText;player.addAdPlayingText(adTextToShow)}player.positionTextElements(player.adList[adListId]);player.toggleLoader(false);player.adList[adListId].played=true;player.adFinished=false;FilePlayerTag.play();player.trackSingleEvent("impression");FilePlayerTag.removeEventListener("loadedmetadata",player.switchPlayerToVastMode)};FilePlayerTag.pause();FilePlayerTag.addEventListener("loadedmetadata",player.switchPlayerToVastMode);player.detachStreamers();var selectedMediaFile=player.getSupportedMediaFile(player.vastOptions.mediaFileList);if(selectedMediaFile===false){player.adList[adListId].error=true;player.playMainFileWhenVastFails(403);return false}FilePlayerTag.src=selectedMediaFile;player.isCurrentlyPlayingAd=true;if(player.displayOptions.vastOptions.showProgressbarMarkers){player.hideAdMarkers()}FilePlayerTag.load();FilePlayerTag.addEventListener("ended",player.onVastAdEnded)};var FilePlayerTimeUpdate=function(){if(player.adFinished){FilePlayerTag.removeEventListener("timeupdate",FilePlayerTimeUpdate);return}var currentTime=Math.floor(FilePlayerTag.currentTime);if(player.vastOptions.duration!=0){player.scheduleTrackingEvent(currentTime,player.vastOptions.duration)}if(currentTime>=player.vastOptions.duration-1&&player.vastOptions.duration!=0){FilePlayerTag.removeEventListener("timeupdate",FilePlayerTimeUpdate);player.adFinished=true}};playFilePlayer(adListId);FilePlayerTag.addEventListener("timeupdate",FilePlayerTimeUpdate)},playRoll:function(adListId){var player=this;var FilePlayerTag=document.getElementById(player.FilePlayerId);for(var i=0;i<adListId.length;i++){if(!player.adPool.hasOwnProperty(adListId[i])){player.announceLocalError(101);return}player.temporaryAdPods.push(player.adList[adListId[i]])}if(player.vastOptions!==null&&player.vastOptions.adType.toLowerCase()==="linear"){return}var adListIdToPlay=player.getNextAdPod();if(adListIdToPlay!==null){player.renderFileAd(adListIdToPlay,true)}},getSupportedMediaFile:function(mediaFiles){var selectedMediaFile=null;var adSupportedType=false;if(mediaFiles.length){for(var i=0;i<mediaFiles.length;i++){var supportLevel=this.getMediaFileTypeSupportLevel(mediaFiles[i]["type"]);if(supportLevel==="maybe"||supportLevel==="probably"){selectedMediaFile=mediaFiles[i]["src"];adSupportedType=true}if(supportLevel==="probably"){break}}}if(adSupportedType===false){return false}return selectedMediaFile},getMediaFileTypeSupportLevel:function(mediaType){if(mediaType===null){return null}tmpFile=document.createElement("File");var response=tmpFile.canPlayType(mediaType);if(response==""){response="no"}delete tmpFile;return response},scheduleTrackingEvent:function(currentTime,duration){var player=this;if(currentTime==0){player.trackSingleEvent("start")}if(typeof player.vastOptions.tracking["progress"]!=="undefined"&&player.vastOptions.tracking["progress"].length&&typeof player.vastOptions.tracking["progress"][currentTime]!=="undefined"){player.trackSingleEvent("progress",currentTime)}if(currentTime==Math.floor(duration/4)){player.trackSingleEvent("firstQuartile")}if(currentTime==Math.floor(duration/2)){player.trackSingleEvent("midpoint")}if(currentTime==Math.floor(duration*3/4)){player.trackSingleEvent("thirdQuartile")}if(currentTime>=duration-1){player.trackSingleEvent("complete")}},trackSingleEvent:function(eventType,eventSubType){var player=this;if(typeof player.vastOptions==="undefined"||player.vastOptions===null){return}var trackingUris=[];trackingUris.length=0;switch(eventType){case"start":case"firstQuartile":case"midpoint":case"thirdQuartile":case"complete":if(player.vastOptions.stopTracking[eventType]===false){if(player.vastOptions.tracking[eventType]!==null){trackingUris=player.vastOptions.tracking[eventType]}player.vastOptions.stopTracking[eventType]=true}break;case"progress":player.vastOptions.tracking["progress"][eventSubType].elements.forEach(function(currentValue,index){if(player.vastOptions.tracking["progress"][eventSubType].stopTracking===false&&player.vastOptions.tracking["progress"][eventSubType].elements.length){trackingUris=player.vastOptions.tracking["progress"][eventSubType].elements}player.vastOptions.tracking["progress"][eventSubType].stopTracking=true});break;case"impression":if(typeof player.vastOptions.impression!=="undefined"&&player.vastOptions.impression!==null&&typeof player.vastOptions.impression.length!=="unknown"){trackingUris=player.vastOptions.impression}break;default:break}player.callUris(trackingUris)},completeNonLinearStatic:function(adListId){var player=this;player.closeNonLinear(adListId);if(player.adFinished==false){player.adFinished=true;player.trackSingleEvent("complete")}clearInterval(player.nonLinearTracking)},createNonLinearStatic:function(adListId){var player=this;var FilePlayerTag=document.getElementById(player.FilePlayerId);if(!player.adPool.hasOwnProperty(adListId)||player.adPool[adListId].error===true){player.announceLocalError(101);return}player.vastOptions=player.adPool[adListId];player.createBoard(adListId);if(player.adList[adListId].error===true){return}player.adFinished=false;player.trackSingleEvent("start");var duration=player.adList[adListId].nonLinearDuration?player.adList[adListId].nonLinearDuration:player.vastOptions.duration;player.nonLinearTracking=setInterval(function(){if(player.adFinished!==true){var currentTime=Math.floor(FilePlayerTag.currentTime);player.scheduleTrackingEvent(currentTime,duration);if(currentTime>=duration-1){player.adFinished=true}}},400);time=parseInt(player.getCurrentTime())+parseInt(duration);player.scheduleTask({time:time,closeStaticAd:adListId})},createBoard:function(adListId){var player=this;var vastSettings=player.adPool[adListId];if(typeof vastSettings.staticResource==="undefined"||player.supportedStaticTypes.indexOf(vastSettings.creativeType)===-1){player.adList[adListId].error=true;if(!player.vastOptions||typeof player.vastOptions.errorUrl==="undefined"){player.announceLocalError(503)}else{player.announceError(503)}return}player.adList[adListId].played=true;var FilePlayerTag=document.getElementById(player.FilePlayerId);var playerWidth=FilePlayerTag.clientWidth;var playerHeight=FilePlayerTag.clientHeight;var board=document.createElement("div");var vAlign=player.adList[adListId].vAlign?player.adList[adListId].vAlign:player.nonLinearVerticalAlign;var creative=new Image;creative.src=vastSettings.staticResource;creative.id="fluid_nonLinear_imgCreative_"+adListId+"_"+player.FilePlayerId;creative.onerror=function(){player.adList[adListId].error=true;player.announceError(500)};creative.onload=function(){if(typeof player.adList[adListId].size!=="undefined"){origWidth=player.adList[adListId].size.split("x")[0];origHeight=player.adList[adListId].size.split("x")[1]}else if(vastSettings.dimension.width&&vastSettings.dimension.height){origWidth=vastSettings.dimension.width;origHeight=vastSettings.dimension.height}else{origWidth=creative.width;origHeight=creative.height}if(origWidth>playerWidth){newBannerWidth=playerWidth-5;newBannerHeight=origHeight*newBannerWidth/origWidth}else{newBannerWidth=origWidth;newBannerHeight=origHeight}if(player.adList[adListId].roll!=="onPauseRoll"){document.getElementById("fluid_nonLinear_"+adListId).style.display=""}img=document.getElementById(creative.id);img.width=newBannerWidth;img.height=newBannerHeight;player.trackSingleEvent("impression")};board.id="fluid_nonLinear_"+adListId;board.className="fluid_nonLinear_"+vAlign;board.className+=" fluid_nonLinear_ad";board.innerHTML=creative.outerHTML;board.style.display="none";board.onclick=function(){if(typeof vastSettings.clickthroughUrl!=="undefined"){window.open(vastSettings.clickthroughUrl)}if(typeof vastSettings.clicktracking!=="undefined"){player.callUris([vastSettings.clicktracking])}};if(typeof vastSettings.clickthroughUrl!=="undefined"){board.style.cursor="pointer"}var closeBtn=document.createElement("div");closeBtn.id="close_button_"+player.FilePlayerId;closeBtn.className="close_button";closeBtn.innerHTML="";closeBtn.title=player.displayOptions.layoutControls.closeButtonCaption;var tempadListId=adListId;closeBtn.onclick=function(event){this.parentElement.remove(player);if(typeof event.stopImmediatePropagation!=="undefined"){event.stopImmediatePropagation()}player.adFinished=true;clearInterval(player.nonLinearTracking);if(player.adList[tempadListId].roll==="onPauseRoll"&&player.onPauseRollAdPods[0]){var getNextOnPauseRollAd=player.onPauseRollAdPods[0];player.createBoard(getNextOnPauseRollAd);player.currentOnPauseRollAd=player.onPauseRollAdPods[0];delete player.onPauseRollAdPods[0]}return false};board.appendChild(closeBtn);FilePlayerTag.parentNode.insertBefore(board,FilePlayerTag.nextSibling)},closeNonLinear:function(adListId){var element=document.getElementById("fluid_nonLinear_"+adListId);if(element){element.remove()}},rollGroupContainsLinear:function(groupedRolls){var player=this;var found=false;for(var i=0;i<groupedRolls.length;i++){if(player.adList[groupedRolls[i].id].adType&&player.adList[groupedRolls[i].id].adType==="linear"){found=true;break}}return found},rollGroupContainsNonlinear:function(groupedRolls){var player=this;var found=false;for(var i=0;i<groupedRolls.length;i++){if(player.adList[groupedRolls[i].id].adType.toLowerCase()==="nonlinear"){found=true;break}}return found},preRollFail:function(){var player=this;var preRollsLength=player.preRollAdPodsLength;player.preRollVastResolved++;if(player.preRollVastResolved===preRollsLength){player.preRollAdsPlay()}},preRollSuccess:function(){var player=this;var preRollsLength=player.preRollAdPodsLength;player.preRollVastResolved++;if(player.preRollVastResolved===preRollsLength){player.preRollAdsPlay()}},preRollAdsPlay:function(){var player=this;var time=0;var adListIds=player.preRollAdPods;var adsByType={linear:[],nonLinear:[]};player.firstPlayLaunched=true;for(var index=0;index<adListIds.length;index++){if(player.adList[adListIds[index]].played===true){return}if(player.adList[adListIds[index]].adType==="linear"){adsByType.linear.push(adListIds[index])}if(player.adList[adListIds[index]].adType==="nonLinear"){adsByType.nonLinear.push(adListIds[index]);player.scheduleTask({time:time,playRoll:"midRoll",adListId:adsByType.nonLinear.shift()})}}if(adsByType.linear.length>0){player.toggleLoader(true);player.playRoll(adsByType.linear)}else{player.playMainFileWhenVastFails(900)}},preRoll:function(event){var player=fluidPlayerClass.getInstanceById(this.id);var FilePlayerTag=document.getElementById(this.getAttribute("id"));var vastObj=event.vastObj;FilePlayerTag.removeEventListener(event.type,player.preRoll);var adListId=[];adListId[0]=event.type.replace("adId_","");var time=0;if(player.adList[adListId[0]].played===true){return}player.preRollAdPods.push(adListId[0]);player.preRollSuccess(vastObj)},createAdMarker:function(adListId,time){var player=this;var markersHolder=document.getElementById(player.FilePlayerId+"_ad_markers_holder");var adMarker=document.createElement("div");adMarker.id="ad_marker_"+player.FilePlayerId+"_"+adListId;adMarker.className="fluid_controls_ad_marker";adMarker.style.left=time/player.mainFileDuration*100+"%";if(player.isCurrentlyPlayingAd){adMarker.style.display="none"}markersHolder.appendChild(adMarker)},hideAdMarker:function(adListId){var player=this;var element=document.getElementById("ad_marker_"+player.FilePlayerId+"_"+adListId);if(element){element.style.display="none"}},showAdMarkers:function(){var player=this;var markersHolder=document.getElementById(player.FilePlayerId+"_ad_markers_holder");var adMarkers=markersHolder.getElementsByClassName("fluid_controls_ad_marker");var idPrefix="ad_marker_"+player.FilePlayerId+"_";for(var i=0;i<adMarkers.length;++i){var item=adMarkers[i];var adListId=item.id.replace(idPrefix,"");if(player.adList[adListId].played===false){item.style.display=""}}},hideAdMarkers:function(){var player=this;var markersHolder=document.getElementById(player.FilePlayerId+"_ad_markers_holder");var adMarkers=markersHolder.getElementsByClassName("fluid_controls_ad_marker");for(var i=0;i<adMarkers.length;++i){var item=adMarkers[i];item.style.display="none"}},midRoll:function(event){var player=fluidPlayerClass.getInstanceById(this.id);var FilePlayerTag=document.getElementById(this.getAttribute("id"));FilePlayerTag.removeEventListener(event.type,player.midRoll);var adListId=event.type.replace("adId_","");if(player.adList[adListId].played===true){return}var time=player.adList[adListId].timer;if(typeof time=="string"&&time.indexOf("%")!==-1){time=time.replace("%","");time=Math.floor(player.mainFileDuration/100*time)}if(player.displayOptions.vastOptions.showProgressbarMarkers&&player.adList[adListId].adType==="nonLinear"){player.createAdMarker(adListId,time)}player.scheduleTask({time:time,playRoll:"midRoll",adListId:adListId})},postRoll:function(event){var player=fluidPlayerClass.getInstanceById(this.id);var FilePlayerTag=document.getElementById(this.getAttribute("id"));FilePlayerTag.removeEventListener(event.type,player.postRoll);var adListId=event.type.replace("adId_","");player.scheduleTask({time:Math.floor(player.mainFileDuration),playRoll:"postRoll",adListId:adListId})},onPauseRoll:function(event){var player=fluidPlayerClass.getInstanceById(this.id);var FilePlayerTag=document.getElementById(this.getAttribute("id"));FilePlayerTag.removeEventListener(event.type,player.onPauseRoll);var adListId=event.type.replace("adId_","");if(player.adList[adListId].adType==="nonLinear"){if(!player.adPool.hasOwnProperty(adListId)||player.adPool[adListId].error===true){player.announceLocalError(101);return}var linearAdExists=document.getElementsByClassName("fluid_nonLinear_ad")[0];if(!linearAdExists){player.createBoard(adListId);player.currentOnPauseRollAd=adListId;onPauseAd=document.getElementById("fluid_nonLinear_"+adListId);if(onPauseAd){onPauseAd.style.display="none"}}else{player.onPauseRollAdPods.push(adListId)}}},hasValidOnPauseAd:function(){var player=this;var onPauseAd=player.findRoll("onPauseRoll");return onPauseAd.length!=0&&player.adList[onPauseAd[0]]&&player.adList[onPauseAd[0]].error===false},toggleOnPauseAd:function(){var player=this;var FilePlayerTag=document.getElementById(this.FilePlayerId);if(player.hasValidOnPauseAd()&&!player.isCurrentlyPlayingAd){var onPauseRoll=player.findRoll("onPauseRoll");if(player.currentOnPauseRollAd!==""){var adListId=player.currentOnPauseRollAd}else{var adListId=onPauseRoll[0]}player.vastOptions=player.adPool[adListId];var onPauseAd=document.getElementById("fluid_nonLinear_"+adListId);if(onPauseAd&&FilePlayerTag.paused){onPauseAd.style.display="flex";player.adList[adListId].played=false;player.trackingOnPauseNonLinearAd(adListId,"start")}else if(onPauseAd&&!FilePlayerTag.paused){onPauseAd.style.display="none";player.adFinished=true;player.trackingOnPauseNonLinearAd(adListId,"complete")}}},trackingOnPauseNonLinearAd:function(adListId,status){var player=this;if(!player.adPool.hasOwnProperty(adListId)||player.adPool[adListId].error===true){player.announceLocalError(101);return}player.vastOptions=player.adPool[adListId];player.trackSingleEvent(status)},getLinearAdsFromKeyTime:function(keyTimeLinearObj){var player=this;var adListIds=[];for(var i=0;i<keyTimeLinearObj.length;i++){if(player.adList[keyTimeLinearObj[i].adListId].played===false){adListIds.push(keyTimeLinearObj[i].adListId)}}return adListIds},adKeytimePlay:function(keyTime){var player=this;if(!player.timerPool[keyTime]||player.isCurrentlyPlayingAd){return}var timerPoolKeytimeCloseStaticAdsLength=player.timerPool[keyTime]["closeStaticAd"].length;var timerPoolKeytimeLinearAdsLength=player.timerPool[keyTime]["linear"].length;var timerPoolKeytimeNonlinearAdsLength=player.timerPool[keyTime]["nonLinear"].length;if(timerPoolKeytimeCloseStaticAdsLength===0&&timerPoolKeytimeLinearAdsLength===0&&timerPoolKeytimeNonlinearAdsLength===0){delete player.timerPool[keyTime];return}if(timerPoolKeytimeCloseStaticAdsLength>0){for(var index=0;index<timerPoolKeytimeCloseStaticAdsLength;index++){var adListId=player.timerPool[keyTime]["closeStaticAd"][index].closeStaticAd;if(player.adList[adListId].played===true){player.completeNonLinearStatic(adListId)}}player.timerPool[keyTime]["closeStaticAd"]=[]}if(timerPoolKeytimeLinearAdsLength>0){var adListIds=player.getLinearAdsFromKeyTime(player.timerPool[keyTime]["linear"]);if(adListIds.length>0){player.playRoll(adListIds);player.timerPool[keyTime]["linear"]=[];return}}if(timerPoolKeytimeNonlinearAdsLength>0){for(var index=0;index<timerPoolKeytimeNonlinearAdsLength;index++){var adListId=player.timerPool[keyTime]["nonLinear"][index].adListId;var vastOptions=player.adPool[adListId];if(player.adList[adListId].played===false){player.createNonLinearStatic(adListId);if(player.displayOptions.vastOptions.showProgressbarMarkers){player.hideAdMarker(adListId)}player.timerPool[keyTime]["nonLinear"].splice(index,1);return}}}},adTimer:function(){var player=this;if(player.isTimer==true){return}player.isTimer=!player.isTimer;player.timer=setInterval(function(){var keyTime=Math.floor(player.getCurrentTime());player.adKeytimePlay(keyTime)},800)},scheduleTask:function(task){var player=this;if(!player.timerPool.hasOwnProperty(task.time)){player.timerPool[task.time]={linear:[],nonLinear:[],closeStaticAd:[]}}if(task.hasOwnProperty("playRoll")&&player.adList[task.adListId].adType==="linear"){player.timerPool[task.time]["linear"].push(task)}else if(task.hasOwnProperty("playRoll")&&player.adList[task.adListId].adType==="nonLinear"){player.timerPool[task.time]["nonLinear"].push(task)}else if(task.hasOwnProperty("closeStaticAd")){player.timerPool[task.time]["closeStaticAd"].push(task)}},deleteVastAdElements:function(){var player=this;player.removeClickthrough();player.removeSkipButton();player.removeAdCountdown();player.removeAdPlayingText();player.removeCTAButton();player.vastLogoBehaviour(false)},switchToMainFile:function(){var player=this;var FilePlayerTag=document.getElementById(player.FilePlayerId);FilePlayerTag.src=player.originalSrc;player.initialiseStreamers();var newCurrentTime=typeof FilePlayerTag.mainFileCurrentTime!=="undefined"?FilePlayerTag.mainFileCurrentTime:0;if(FilePlayerTag.hasOwnProperty("currentTime")){FilePlayerTag.currentTime=newCurrentTime}if(player.displayOptions.layoutControls.loop){FilePlayerTag.loop=true}player.setCurrentTimeAndPlay(newCurrentTime,player.autoplayAfterAd);player.isCurrentlyPlayingAd=false;player.deleteVastAdElements();player.adFinished=true;player.displayOptions.vastOptions.vastAdvanced.vastFileEndedCallback();player.vastOptions=null;player.setBuffering();var progressbarContainer=document.getElementById(player.FilePlayerId+"_fluid_controls_progress_container");if(progressbarContainer!==null){var backgroundColor=player.displayOptions.layoutControls.primaryColor?player.displayOptions.layoutControls.primaryColor:"white";document.getElementById(player.FilePlayerId+"_vast_control_currentprogress").style.backgroundColor=backgroundColor}FilePlayerTag.removeEventListener("ended",player.onVastAdEnded);if(player.displayOptions.vastOptions.showProgressbarMarkers){player.showAdMarkers()}if(player.hasTitle()){var title=document.getElementById(player.FilePlayerId+"_title");title.style.display="inline"}},vastLogoBehaviour:function(vastPlaying){if(!this.displayOptions.layoutControls.logo.showOverAds){var logoHolder=document.getElementById(this.FilePlayerId+"_logo");var logoImage=document.getElementById(this.FilePlayerId+"_logo_image");if(!logoHolder||!logoImage){return}var logoDisplay=vastPlaying?"none":"inline";logoHolder.style.display=logoDisplay}},getNextAdPod:function(){var player=this;var getFirstUnPlayedAd=false;var adListId=null;if(player.temporaryAdPods.length>0){var temporaryAdPods=player.temporaryAdPods.shift();adListId=temporaryAdPods.id}return adListId},onVastAdEnded:function(){var player=fluidPlayerClass.getInstanceById(this.id);var FilePlayerTag=document.getElementById(player.FilePlayerId);player.deleteVastAdElements();var availableNextAdID=player.getNextAdPod();if(availableNextAdID===null){player.switchToMainFile();player.vastOptions=null;player.adFinished=true}else{FilePlayerTag.removeEventListener("ended",player.onVastAdEnded);player.isCurrentlyPlayingAd=false;player.vastOptions=null;player.adFinished=true;player.renderFileAd(availableNextAdID,false)}},onMainFileEnded:function(){var FilePlayerTag=this;var player=fluidPlayerClass.getInstanceById(this.id);if(player.isCurrentlyPlayingAd&&player.autoplayAfterAd){return}if(Math.floor(player.getCurrentTime())>=Math.floor(player.mainFileDuration)){player.adKeytimePlay(Math.floor(player.mainFileDuration));clearInterval(player.timer)}if(player.displayOptions.layoutControls.loop===true){var FileInstanceId=fluidPlayerClass.getInstanceIdByWrapperId(this.getAttribute("id"));var FilePlayerInstance=fluidPlayerClass.getInstanceById(FileInstanceId);player.switchToMainFile();player.playPauseToggle(FilePlayerTag)}},getCurrentTime:function(){var player=this;if(player.isCurrentlyPlayingAd){return player.mainFileCurrentTime}else{var FilePlayerTag=document.getElementById(this.FilePlayerId);return FilePlayerTag.currentTime}},addSkipButton:function(){var FilePlayerTag=document.getElementById(this.FilePlayerId);var divSkipButton=document.createElement("div");divSkipButton.id="skip_button_"+this.FilePlayerId;divSkipButton.className="skip_button skip_button_disabled";divSkipButton.innerHTML=this.displayOptions.vastOptions.skipButtonCaption.replace("[seconds]",this.vastOptions.skipoffset);document.getElementById("fluid_File_wrapper_"+this.FilePlayerId).appendChild(divSkipButton);FilePlayerTag.addEventListener("timeupdate",this.decreaseSkipOffset,false)},addAdCountdown:function(){var FilePlayerTag=document.getElementById(this.FilePlayerId);var FileWrapper=document.getElementById("fluid_File_wrapper_"+this.FilePlayerId);var divAdCountdown=document.createElement("div");var adCountdown=this.pad(parseInt(this.currentFileDuration/60))+":"+this.pad(parseInt(this.currentFileDuration%60));var durationText=parseInt(adCountdown);divAdCountdown.id="ad_countdown"+this.FilePlayerId;divAdCountdown.className="ad_countdown";divAdCountdown.innerHTML="Ad - "+durationText;FileWrapper.appendChild(divAdCountdown);FilePlayerTag.addEventListener("timeupdate",this.decreaseAdCountdown,false);FileWrapper.addEventListener("mouseover",function(){divAdCountdown.style.display="none"},false)},decreaseAdCountdown:function decreaseAdCountdown(){var FilePlayerTag=this;var player=fluidPlayerClass.getInstanceById(FilePlayerTag.id);var sec=parseInt(player.currentFileDuration)-parseInt(FilePlayerTag.currentTime);var btn=document.getElementById("ad_countdown"+player.FilePlayerId);if(btn){btn.innerHTML="Ad - "+player.pad(parseInt(sec/60))+":"+player.pad(parseInt(sec%60))}else{FilePlayerTag.removeEventListener("timeupdate",player.decreaseAdCountdown)}},removeAdCountdown:function(){var btn=document.getElementById("ad_countdown"+this.FilePlayerId);if(btn){btn.parentElement.removeChild(btn)}},toggleAdCountdown:function(showing){var btn=document.getElementById("ad_countdown"+this.FilePlayerId);if(btn){if(showing){btn.style.display="inline-block"}else{btn.style.display="none"}}},addAdPlayingText:function(textToShow){var player=this;var adPlayingDiv=document.createElement("div");adPlayingDiv.id=this.FilePlayerId+"_fluid_ad_playing";if(player.displayOptions.layoutControls.primaryColor){adPlayingDiv.style.backgroundColor=player.displayOptions.layoutControls.primaryColor;adPlayingDiv.style.opacity=1}adPlayingDiv.className="fluid_ad_playing";adPlayingDiv.innerText=textToShow;document.getElementById("fluid_File_wrapper_"+this.FilePlayerId).appendChild(adPlayingDiv)},positionTextElements:function(adListData){var player=this;var allowedPosition=["top left","top right","bottom left","bottom right"];var skipButton=document.getElementById("skip_button_"+player.FilePlayerId);var adPlayingDiv=document.getElementById(player.FilePlayerId+"_fluid_ad_playing");var ctaButton=document.getElementById(player.FilePlayerId+"_fluid_cta");var ctaButtonHeightWithSpacing=0;var adPlayingDivHeightWithSpacing=0;var pixelSpacing=8;var isBottom=false;var skipButtonHeightWithSpacing=0;var positionsCTA=[];var defaultPositions={top:{left:{h:34,v:34},right:{h:0,v:34}},bottom:{left:{h:34,v:50},right:{h:0,v:50}}};if(skipButton!==null){skipButtonHeightWithSpacing=skipButton.offsetHeight+pixelSpacing;var wrapperElement=document.getElementById("fluid_File_wrapper_"+player.FilePlayerId);if(wrapperElement.classList.contains("mobile")){defaultPositions.bottom.left.v=75;defaultPositions.bottom.right.v=75}}if(ctaButton!==null){var CTATextPosition=player.displayOptions.vastOptions.adCTATextPosition.toLowerCase();if(allowedPosition.indexOf(CTATextPosition)==-1){console.log('[FP Error] Invalid position for CTAText. Reverting to "bottom right"');CTATextPosition="bottom right"}positionsCTA=CTATextPosition.split(" ");isBottom=positionsCTA[0]=="bottom";ctaButton.style[positionsCTA[0]]=defaultPositions[positionsCTA[0]][positionsCTA[1]].v+"px";ctaButton.style[positionsCTA[1]]=defaultPositions[positionsCTA[0]][positionsCTA[1]].h+"px";if(isBottom&&positionsCTA[1]=="right"){ctaButton.style[positionsCTA[0]]=defaultPositions[positionsCTA[0]][positionsCTA[1]].v+skipButtonHeightWithSpacing+"px"}ctaButtonHeightWithSpacing=ctaButton.offsetHeight+pixelSpacing+"px"}if(adPlayingDiv!==null){var adPlayingDivPosition=adListData.adTextPosition!==null?adListData.adTextPosition.toLowerCase():this.displayOptions.vastOptions.adTextPosition.toLowerCase();if(allowedPosition.indexOf(adPlayingDivPosition)==-1){console.log('[FP Error] Invalid position for adText. Reverting to "top left"');adPlayingDivPosition="top left"}var positionsAdText=adPlayingDivPosition.split(" ");adPlayingDiv.style[positionsAdText[0]]=defaultPositions[positionsAdText[0]][positionsAdText[1]].v+"px";adPlayingDiv.style[positionsAdText[1]]=defaultPositions[positionsAdText[0]][positionsAdText[1]].h+"px";adPlayingDivHeightWithSpacing=adPlayingDiv.offsetHeight+pixelSpacing+"px"}if(ctaButtonHeightWithSpacing>0&&adPlayingDivHeightWithSpacing>0&&CTATextPosition==adPlayingDivPosition){if(isBottom){if(positionsCTA[1]=="right"){adPlayingDiv.style.bottom=defaultPositions[positionsAdText[0]][positionsAdText[1]].v+skipButtonHeightWithSpacing+ctaButtonHeightWithSpacing+"px"}else{adPlayingDiv.style.bottom=defaultPositions[positionsAdText[0]][positionsAdText[1]].v+ctaButtonHeightWithSpacing+"px"}}else{ctaButton.style.top=defaultPositions[positionsCTA[0]][positionsCTA[1]].v+adPlayingDivHeightWithSpacing+"px"}}},removeAdPlayingText:function(){var div=document.getElementById(this.FilePlayerId+"_fluid_ad_playing");if(div){div.parentElement.removeChild(div)}},addCTAButton:function(landingPage){if(!this.displayOptions.vastOptions.adCTAText){return}var player=this;var FilePlayerTag=document.getElementById(this.FilePlayerId);var ctaButton=document.createElement("div");ctaButton.id=this.FilePlayerId+"_fluid_cta";ctaButton.className="fluid_ad_cta";var link=document.createElement("span");link.innerHTML=this.displayOptions.vastOptions.adCTAText+'<br/><span class="add_icon_clickthrough">'+landingPage+"</span>";ctaButton.addEventListener("click",function(){if(!FilePlayerTag.paused){FilePlayerTag.pause()}var win=window.open(player.vastOptions.clickthroughUrl,"_blank");win.focus();return true},false);ctaButton.appendChild(link);document.getElementById("fluid_File_wrapper_"+this.FilePlayerId).appendChild(ctaButton)},removeCTAButton:function(){var btn=document.getElementById(this.FilePlayerId+"_fluid_cta");if(btn){btn.parentElement.removeChild(btn)}},decreaseSkipOffset:function decreaseSkipOffset(){var FilePlayerTag=this;var player=fluidPlayerClass.getInstanceById(FilePlayerTag.id);var sec=player.vastOptions.skipoffset-Math.floor(FilePlayerTag.currentTime);var btn=document.getElementById("skip_button_"+player.FilePlayerId);if(btn){if(sec>=1){btn.innerHTML=player.displayOptions.vastOptions.skipButtonCaption.replace("[seconds]",sec)}else{btn.innerHTML='<a href="javascript:;" id="skipHref_'+player.FilePlayerId+'" onclick="fluidPlayerClass.getInstanceById(\''+player.FilePlayerId+"').pressSkipButton(); return false;\">"+player.displayOptions.vastOptions.skipButtonClickCaption+"</a>";btn.className=btn.className.replace(/\bskip_button_disabled\b/,"");FilePlayerTag.removeEventListener("timeupdate",player.decreaseSkipOffset)}}else{sec=0;FilePlayerTag.removeEventListener("timeupdate",FilePlayerTag.decreaseSkipOffset)}},pressSkipButton:function(){this.removeSkipButton();this.removeAdPlayingText();this.removeCTAButton();this.displayOptions.vastOptions.vastAdvanced.vastFileSkippedCallback();var event=document.createEvent("Event");event.initEvent("ended",false,true);document.getElementById(this.FilePlayerId).dispatchEvent(event)},removeSkipButton:function(){var btn=document.getElementById("skip_button_"+this.FilePlayerId);if(btn){btn.parentElement.removeChild(btn)}},addClickthroughLayer:function(){var player=this;var FilePlayerTag=document.getElementById(player.FilePlayerId);var divWrapper=document.getElementById("fluid_File_wrapper_"+player.FilePlayerId);var divClickThrough=document.createElement("div");divClickThrough.className="vast_clickthrough_layer";divClickThrough.id="vast_clickthrough_layer_"+player.FilePlayerId;divClickThrough.setAttribute("style","position: absolute; cursor: pointer; top: 0; left: 0; width: "+FilePlayerTag.offsetWidth+"px; height: "+FilePlayerTag.offsetHeight+"px;");divWrapper.appendChild(divClickThrough);var openClickthrough=function(){window.open(player.vastOptions.clickthroughUrl);if(typeof player.vastOptions.clicktracking!=="undefined"){player.callUris(player.vastOptions.clicktracking)}};var clickthroughLayer=document.getElementById("vast_clickthrough_layer_"+player.FilePlayerId);var isIos9orLower=player.mobileInfo.device==="iPhone"&&player.mobileInfo.userOsMajor!==false&&player.mobileInfo.userOsMajor<=9;clickthroughLayer.onclick=function(){if(FilePlayerTag.paused){if(isIos9orLower&&!player.suppressClickthrough){openClickthrough();player.suppressClickthrough=true}else{FilePlayerTag.play()}}else{openClickthrough();FilePlayerTag.pause()}}},removeClickthrough:function(){var clickthroughLayer=document.getElementById("vast_clickthrough_layer_"+this.FilePlayerId);if(clickthroughLayer){clickthroughLayer.parentNode.removeChild(clickthroughLayer)}},getCurrentSrc:function(){var sources=document.getElementById(this.FilePlayerId).getElementsByTagName("source");if(sources.length){return sources[0].getAttribute("src")}return null},getCurrentSrcType:function(){var sources=document.getElementById(this.FilePlayerId).getElementsByTagName("source");if(sources.length){for(var i=0;i<sources.length;i++){if(sources[i].getAttribute("src")==this.originalSrc){return sources[i].getAttribute("type")}}}return null},convertTimeStringToSeconds:function(str){if(str&&str.match(/^(\d){2}(:[0-5][0-9]){2}(.(\d){1,3})?$/)){var timeParts=str.split(":");return parseInt(timeParts[0],10)*3600+parseInt(timeParts[1],10)*60+parseInt(timeParts[2],10)}return false},onRecentWaiting:function(){var player=fluidPlayerClass.getInstanceById(this.id);player.recentWaiting=true;setTimeout(function(){player.recentWaiting=false},1e3)},onFluidPlayerPause:function(){var FilePlayerTag=this;setTimeout(function(){var player=fluidPlayerClass.getInstanceById(FilePlayerTag.id);if(!player.recentWaiting){var event=document.createEvent("CustomEvent");event.initEvent("fluidplayerpause",false,true);FilePlayerTag.dispatchEvent(event)}},100)},checkShouldDisplayVolumeBar:function(){var deviceType=fluidPlayerClass.getMobileOs();if(deviceType.userOs==="iOS"){return false}return true},generateCustomControlTags:function(){return'<div class="fluid_controls_left">'+'   <div id="'+this.FilePlayerId+'_fluid_control_playpause" class="fluid_button fluid_button_play"></div>'+"</div>"+'<div id="'+this.FilePlayerId+'_fluid_controls_progress_container" class="fluid_controls_progress_container fluid_slider">'+'   <div class="fluid_controls_progress">'+'      <div id="'+this.FilePlayerId+'_vast_control_currentprogress" class="fluid_controls_currentprogress">'+'          <div id="'+this.FilePlayerId+'_vast_control_currentpos" class="fluid_controls_currentpos"></div>'+"      </div>"+"   </div>"+'   <div id="'+this.FilePlayerId+'_buffered_amount" class="fluid_controls_buffered"></div>'+'   <div id="'+this.FilePlayerId+'_ad_markers_holder" class="fluid_controls_ad_markers_holder"></div>'+"</div>"+'<div class="fluid_controls_right">'+'   <div id="'+this.FilePlayerId+'_fluid_control_fullscreen" class="fluid_button fluid_button_fullscreen"></div>'+'   <div id="'+this.FilePlayerId+'_fluid_control_theatre" class="fluid_button fluid_button_theatre"></div>'+'   <div id="'+this.FilePlayerId+'_fluid_control_subtitles" class="fluid_button fluid_button_subtitles"></div>'+'   <div id="'+this.FilePlayerId+'_fluid_control_File_source" class="fluid_button fluid_button_File_source"></div>'+'   <div id="'+this.FilePlayerId+'_fluid_control_playback_rate" class="fluid_button fluid_button_playback_rate"></div>'+'   <div id="'+this.FilePlayerId+'_fluid_control_download" class="fluid_button fluid_button_download"></div>'+'   <div id="'+this.FilePlayerId+'_fluid_control_volume_container" class="fluid_control_volume_container fluid_slider">'+'       <div id="'+this.FilePlayerId+'_fluid_control_volume" class="fluid_control_volume">'+'           <div id="'+this.FilePlayerId+'_fluid_control_currentvolume" class="fluid_control_currentvolume">'+'               <div id="'+this.FilePlayerId+'_fluid_control_volume_currentpos" class="fluid_control_volume_currentpos"></div>'+"           </div>"+"       </div>"+"   </div>"+'   <div id="'+this.FilePlayerId+'_fluid_control_mute" class="fluid_button fluid_button_volume"></div>'+'   <div id="'+this.FilePlayerId+'_fluid_control_duration" class="fluid_fluid_control_duration">00:00 / 00:00</div>'+"</div>"},controlPlayPauseToggle:function(FilePlayerId){var playPauseButton=document.getElementById(FilePlayerId+"_fluid_control_playpause");var menuOptionPlay=document.getElementById(FilePlayerId+"context_option_play");var player=fluidPlayerClass.getInstanceById(FilePlayerId);var controlsDisplay=document.getElementById(player.FilePlayerId+"_fluid_controls_container");var fpLogo=document.getElementById(player.FilePlayerId+"_logo");var FilePlayer=document.getElementById(player.FilePlayerId);var initialPlay=document.getElementById(FilePlayerId+"_fluid_initial_play");if(initialPlay){document.getElementById(FilePlayerId+"_fluid_initial_play").style.display="none";document.getElementById(FilePlayerId+"_fluid_initial_play_button").style.opacity="1"}if(!FilePlayer.paused){playPauseButton.className=playPauseButton.className.replace(/\bfluid_button_play\b/g,"fluid_button_pause");controlsDisplay.classList.remove("initial_controls_show");if(fpLogo){fpLogo.classList.remove("initial_controls_show")}if(menuOptionPlay!==null){menuOptionPlay.innerHTML=this.displayOptions.captions.pause}}else{playPauseButton.className=playPauseButton.className.replace(/\bfluid_button_pause\b/g,"fluid_button_play");controlsDisplay.classList.add("initial_controls_show");if(this.isCurrentlyPlayingAd&&player.displayOptions.vastOptions.showPlayButton){document.getElementById(FilePlayerId+"_fluid_initial_play").style.display="block";document.getElementById(FilePlayerId+"_fluid_initial_play_button").style.opacity="1"}if(fpLogo){fpLogo.classList.add("initial_controls_show")}if(menuOptionPlay!==null){menuOptionPlay.innerHTML=this.displayOptions.captions.play}}},playPauseAnimationToggle:function(play){if(this.isCurrentlyPlayingAd||!this.displayOptions.layoutControls.playPauseAnimation||this.isSwitchingSource){return}FilePlayerId=this.FilePlayerId;if(play){document.getElementById(FilePlayerId+"_fluid_state_button").classList.remove("fluid_initial_pause_button");document.getElementById(FilePlayerId+"_fluid_state_button").classList.add("fluid_initial_play_button")}else{document.getElementById(FilePlayerId+"_fluid_state_button").classList.remove("fluid_initial_play_button");document.getElementById(FilePlayerId+"_fluid_state_button").classList.add("fluid_initial_pause_button")}document.getElementById(FilePlayerId+"_fluid_initial_play").classList.add("transform-active");var FilePlayerSaveId=FilePlayerId;setTimeout(function(){document.getElementById(FilePlayerSaveId+"_fluid_initial_play").classList.remove("transform-active")},800)},contolProgressbarUpdate:function(FilePlayerId){var player=fluidPlayerClass.getInstanceById(FilePlayerId);var FilePlayerTag=document.getElementById(FilePlayerId);var currentProgressTag=document.getElementById(FilePlayerId+"_vast_control_currentprogress");currentProgressTag.style.width=FilePlayerTag.currentTime/player.currentFileDuration*100+"%"},formatTime:function(duration){var formatDateObj=new Date(duration*1e3);var formatHours=this.pad(formatDateObj.getUTCHours());var formatMinutes=this.pad(formatDateObj.getUTCMinutes());var formatSeconds=this.pad(formatDateObj.getSeconds());if(formatHours>=1){var result=formatHours+":"+formatMinutes+":"+formatSeconds}else{var result=formatMinutes+":"+formatSeconds}return result},contolDurationUpdate:function(FilePlayerId){var player=fluidPlayerClass.getInstanceById(FilePlayerId);var FilePlayerTag=document.getElementById(FilePlayerId);var currentPlayTime=player.formatTime(FilePlayerTag.currentTime);var totalTime=player.formatTime(player.currentFileDuration);var durationText=currentPlayTime+" / "+totalTime;var timePlaceholder=document.getElementById(FilePlayerId+"_fluid_control_duration");timePlaceholder.innerHTML=durationText},pad:function(value){if(value<10){return"0"+value}else{return value}},contolVolumebarUpdate:function(FilePlayerId){var player=fluidPlayerClass.getInstanceById(FilePlayerId);var FilePlayerTag=document.getElementById(FilePlayerId);var currentVolumeTag=document.getElementById(FilePlayerId+"_fluid_control_currentvolume");var volumeposTag=document.getElementById(FilePlayerId+"_fluid_control_volume_currentpos");var volumebarTotalWidth=document.getElementById(FilePlayerId+"_fluid_control_volume").clientWidth;var volumeposTagWidth=volumeposTag.clientWidth;var muteButtonTag=document.getElementById(FilePlayerId+"_fluid_control_mute");var menuOptionMute=document.getElementById(FilePlayerId+"context_option_mute");if(FilePlayerTag.volume){player.latestVolume=FilePlayerTag.volume;player.fluidStorage.fluidMute=false}if(FilePlayerTag.volume&&!FilePlayerTag.muted){muteButtonTag.className=muteButtonTag.className.replace(/\bfluid_button_mute\b/g,"fluid_button_volume");if(menuOptionMute!==null){menuOptionMute.innerHTML=this.displayOptions.captions.mute}}else{muteButtonTag.className=muteButtonTag.className.replace(/\bfluid_button_volume\b/g,"fluid_button_mute");if(menuOptionMute!==null){menuOptionMute.innerHTML=this.displayOptions.captions.unmute}}currentVolumeTag.style.width=FilePlayerTag.volume*volumebarTotalWidth+"px";volumeposTag.style.left=FilePlayerTag.volume*volumebarTotalWidth-volumeposTagWidth/2+"px"},muteToggle:function(FilePlayerId){var player=fluidPlayerClass.getInstanceById(FilePlayerId);var FilePlayerTag=document.getElementById(FilePlayerId);if(FilePlayerTag.volume&&!FilePlayerTag.muted){FilePlayerTag.volume=0;FilePlayerTag.muted=true}else{FilePlayerTag.volume=player.latestVolume;FilePlayerTag.muted=false}this.fluidStorage.fluidVolume=player.latestVolume;this.fluidStorage.fluidMute=FilePlayerTag.muted},checkFullscreenSupport:function(FilePlayerWrapperId){var FilePlayerWrapper=document.getElementById(FilePlayerWrapperId);var FilePlayer=document.getElementById(this.FilePlayerId);if(FilePlayerWrapper.mozRequestFullScreen){return{goFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",isFullscreen:"mozFullScreenElement"}}else if(FilePlayerWrapper.webkitRequestFullscreen){return{goFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",isFullscreen:"webkitFullscreenElement"}}else if(FilePlayerWrapper.msRequestFullscreen){return{goFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",isFullscreen:"msFullscreenElement"}}else if(FilePlayerWrapper.requestFullscreen){return{goFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",isFullscreen:"fullscreenElement"}}else if(FilePlayer.webkitSupportsFullscreen){return{goFullscreen:"webkitEnterFullscreen",exitFullscreen:"webkitExitFullscreen",isFullscreen:"webkitDisplayingFullscreen"}}return false},fullscreenOff:function(fullscreenButton,menuOptionFullscreen){fullscreenButton.className=fullscreenButton.className.replace(/\bfluid_button_fullscreen_exit\b/g,"fluid_button_fullscreen");if(menuOptionFullscreen!==null){menuOptionFullscreen.innerHTML="Fullscreen"}this.fullscreenMode=false},fullscreenOn:function(fullscreenButton,menuOptionFullscreen){fullscreenButton.className=fullscreenButton.className.replace(/\bfluid_button_fullscreen\b/g,"fluid_button_fullscreen_exit");if(menuOptionFullscreen!==null){menuOptionFullscreen.innerHTML=this.displayOptions.captions.exitFullscreen}this.fullscreenMode=true},fullscreenToggle:function(){fluidPlayerClass.activeFilePlayerId=this.FilePlayerId;var fullscreenTag=document.getElementById("fluid_File_wrapper_"+this.FilePlayerId);var requestFullscreenFunctionNames=this.checkFullscreenSupport("fluid_File_wrapper_"+this.FilePlayerId);var fullscreenButton=document.getElementById(this.FilePlayerId+"_fluid_control_fullscreen");var menuOptionFullscreen=document.getElementById(this.FilePlayerId+"context_option_fullscreen");var FilePlayerTag=document.getElementById(this.FilePlayerId);if(this.theatreMode){this.theatreToggle()}if(requestFullscreenFunctionNames){switch(requestFullscreenFunctionNames.goFullscreen){case"webkitEnterFullscreen":if(!FilePlayerTag[requestFullscreenFunctionNames.isFullscreen]){functionNameToExecute="FilePlayerTag."+requestFullscreenFunctionNames.goFullscreen+"();";this.fullscreenOn(fullscreenButton,menuOptionFullscreen);new Function("FilePlayerTag",functionNameToExecute)(FilePlayerTag)}break;default:if(document[requestFullscreenFunctionNames.isFullscreen]===null){functionNameToExecute="FilePlayerTag."+requestFullscreenFunctionNames.goFullscreen+"();";this.fullscreenOn(fullscreenButton,menuOptionFullscreen)}else{functionNameToExecute="document."+requestFullscreenFunctionNames.exitFullscreen+"();";this.fullscreenOff(fullscreenButton,menuOptionFullscreen)}new Function("FilePlayerTag",functionNameToExecute)(fullscreenTag);break}}else{if(fullscreenTag.className.search(/\bpseudo_fullscreen\b/g)!==-1){fullscreenTag.className=fullscreenTag.className.replace(/\bpseudo_fullscreen\b/g,"");this.fullscreenOff(fullscreenButton,menuOptionFullscreen)}else{fullscreenTag.className+=" pseudo_fullscreen";this.fullscreenOn(fullscreenButton,menuOptionFullscreen)}}},findClosestParent:function(el,selector){var matchesFn;["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(fn){if(typeof document.body[fn]=="function"){matchesFn=fn;return true}return false});var parent;if(el[matchesFn](selector)){return el}while(el){parent=el.parentElement;if(parent&&parent[matchesFn](selector)){return parent}el=parent}return null},getTranslateX:function(el){var coordinates=null;try{var results=el.style.transform.match(/translate3d\((-?\d+px,\s?){2}-?\d+px\)/);if(results&&results.length){coordinates=results[0].replace("translate3d(","").replace(")","").replace(/\s/g,"").replace(/px/g,"").split(",")}}catch(e){coordinates=null}return coordinates&&coordinates.length===3?parseInt(coordinates[0]):0},getEventOffsetX:function(evt,el){var x=0;var translateX=0;while(el&&!isNaN(el.offsetLeft)){translateX=fluidPlayerClass.getTranslateX(el);if(el.tagName==="BODY"){x+=el.offsetLeft+el.clientLeft+translateX-(el.scrollLeft||document.documentElement.scrollLeft)}else{x+=el.offsetLeft+el.clientLeft+translateX-el.scrollLeft}el=el.offsetParent}var eventX;if(typeof evt.touches!=="undefined"&&typeof evt.touches[0]!=="undefined"){eventX=evt.touches[0].clientX}else{eventX=evt.clientX}return eventX-x},getEventOffsetY:function(evt,el){var fullscreenMultiplier=1;var FileWrapper=fluidPlayerClass.findClosestParent(el,'div[id^="fluid_File_wrapper_"]');if(FileWrapper){var FilePlayerId=FileWrapper.id.replace("fluid_File_wrapper_","");var requestFullscreenFunctionNames=fluidPlayerClass.checkFullscreenSupport("fluid_File_wrapper_"+FilePlayerId);if(requestFullscreenFunctionNames&&document[requestFullscreenFunctionNames.isFullscreen]){fullscreenMultiplier=0}}var y=0;while(el&&!isNaN(el.offsetTop)){if(el.tagName==="BODY"){y+=el.offsetTop-(el.scrollTop||document.documentElement.scrollTop)*fullscreenMultiplier}else{y+=el.offsetTop-el.scrollTop*fullscreenMultiplier}el=el.offsetParent}return evt.clientY-y},onProgressbarMouseDown:function(FilePlayerId,event){var player=fluidPlayerClass.getInstanceById(FilePlayerId);player.displayOptions.layoutControls.playPauseAnimation=false;var initialPosition=fluidPlayerClass.getEventOffsetX(event,document.getElementById(FilePlayerId+"_fluid_controls_progress_container"));if(player.isCurrentlyPlayingAd){return}player.fluidPseudoPause=true;var FilePlayerTag=document.getElementById(FilePlayerId);var initiallyPaused=FilePlayerTag.paused;if(!initiallyPaused){FilePlayerTag.pause()}function shiftTime(FilePlayerId,timeBarX){var totalWidth=document.getElementById(FilePlayerId+"_fluid_controls_progress_container").clientWidth;if(totalWidth){FilePlayerTag.currentTime=player.currentFileDuration*timeBarX/totalWidth}}function onProgressbarMouseMove(event){var currentX=fluidPlayerClass.getEventOffsetX(event,document.getElementById(FilePlayerId+"_fluid_controls_progress_container"));initialPosition=NaN;shiftTime(FilePlayerId,currentX);player.contolProgressbarUpdate(player.FilePlayerId);player.contolDurationUpdate(player.FilePlayerId)}function onProgressbarMouseUp(event){document.removeEventListener("mousemove",onProgressbarMouseMove);document.removeEventListener("touchmove",onProgressbarMouseMove);document.removeEventListener("mouseup",onProgressbarMouseUp);document.removeEventListener("touchend",onProgressbarMouseUp);var clickedX=fluidPlayerClass.getEventOffsetX(event,document.getElementById(FilePlayerId+"_fluid_controls_progress_container"));if(isNaN(clickedX)&&!isNaN(initialPosition)){clickedX=initialPosition}if(!isNaN(clickedX)){shiftTime(FilePlayerId,clickedX)}if(!initiallyPaused){player.play()}if(player.initialAnimationSet){setTimeout(function(){player.displayOptions.layoutControls.playPauseAnimation=player.initialAnimationSet},200)}player.fluidPseudoPause=false}document.addEventListener("mouseup",onProgressbarMouseUp);document.addEventListener("touchend",onProgressbarMouseUp);document.addEventListener("mousemove",onProgressbarMouseMove);document.addEventListener("touchmove",onProgressbarMouseMove)},onVolumebarMouseDown:function(FilePlayerId){function shiftVolume(FilePlayerId,volumeBarX){var FilePlayerTag=document.getElementById(FilePlayerId);var totalWidth=document.getElementById(FilePlayerId+"_fluid_control_volume_container").clientWidth;var player=fluidPlayerClass.getInstanceById(FilePlayerId);if(totalWidth){var newVolume=volumeBarX/totalWidth;if(newVolume<.05){newVolume=0;FilePlayerTag.muted=true}else if(newVolume>.95){newVolume=1}if(FilePlayerTag.muted&&newVolume>0){FilePlayerTag.muted=false}player.setVolume(newVolume)}}function onVolumebarMouseMove(event){var currentX=fluidPlayerClass.getEventOffsetX(event,document.getElementById(FilePlayerId+"_fluid_control_volume_container"));shiftVolume(FilePlayerId,currentX)}function onVolumebarMouseUp(event){document.removeEventListener("mousemove",onVolumebarMouseMove);document.removeEventListener("touchmove",onVolumebarMouseMove);document.removeEventListener("mouseup",onVolumebarMouseUp);document.removeEventListener("touchend",onVolumebarMouseUp);var currentX=fluidPlayerClass.getEventOffsetX(event,document.getElementById(FilePlayerId+"_fluid_control_volume_container"));if(!isNaN(currentX)){shiftVolume(FilePlayerId,currentX)}}document.addEventListener("mouseup",onVolumebarMouseUp);document.addEventListener("touchend",onVolumebarMouseUp);document.addEventListener("mousemove",onVolumebarMouseMove);document.addEventListener("touchmove",onVolumebarMouseMove)},setVastList:function(){var player=this;var ads={};var adGroupedByRolls={preRoll:[],postRoll:[],midRoll:[],onPauseRoll:[]};var def={id:null,roll:null,played:false,vastLoaded:false,error:false,adText:null,adTextPosition:null};var idPart=0;var validateVastList=function(item){var hasError=false;switch(item.roll){case"midRoll":if(typeof item.timer==="undefined"){hasError=true}break}return hasError};var validateRequiredParams=function(item){var hasError=false;if(!item.vastTag){player.announceLocalError(102,'"vastTag" property is missing from adList.');hasError=true}if(!item.roll){player.announceLocalError(102,'"roll" is missing from adList.');hasError=true}if(player.availableRolls.indexOf(item.roll)===-1){player.announceLocalError(102,"Only "+player.availableRolls.join(",")+" rolls are supported.");hasError=true}if(item.size&&player.supportedNonLinearAd.indexOf(item.size)===-1){player.announceLocalError(102,"Only "+player.supportedNonLinearAd.join(",")+" size are supported.");hasError=true}return hasError};if(player.displayOptions.vastOptions.hasOwnProperty("adList")){for(var key in player.displayOptions.vastOptions.adList){adItem=player.displayOptions.vastOptions.adList[key];if(validateRequiredParams(adItem)){player.announceLocalError(102,"Wrong adList parameters.");continue}var id="ID"+idPart;ads[id]=Object.assign({},def);ads[id]=Object.assign(ads[id],player.displayOptions.vastOptions.adList[key]);if(adItem.roll=="midRoll"){ads[id].error=validateVastList("midRoll",adItem)}ads[id].id=id;idPart++}}Object.keys(ads).map(function(e){if(ads[e].roll.toLowerCase()==="preRoll".toLowerCase()){adGroupedByRolls.preRoll.push(ads[e])}else if(ads[e].roll.toLowerCase()==="midRoll".toLowerCase()){adGroupedByRolls.midRoll.push(ads[e])}else if(ads[e].roll.toLowerCase()==="postRoll".toLowerCase()){adGroupedByRolls.postRoll.push(ads[e])}else if(ads[e].roll.toLowerCase()==="onPauseRoll".toLowerCase()){adGroupedByRolls.onPauseRoll.push(ads[e])}});player.adGroupedByRolls=adGroupedByRolls;player.adList=ads},findRoll:function(roll){var player=this;var ids=[];ids.length=0;if(!roll||!player.hasOwnProperty("adList")){return}for(var key in player.adList){if(player.adList[key].roll==roll){ids.push(key)}}return ids},volumeChange:function(FilePlayerId,direction){var FilePlayerTag=document.getElementById(FilePlayerId);var newVolume=FilePlayerTag.volume;if(direction=="asc"){newVolume+=.05}else if(direction=="desc"){newVolume-=.05}if(newVolume<.05){newVolume=0}else if(newVolume>.95){newVolume=1}this.setVolume(newVolume)},currentTimeChange:function(FilePlayerId,keyCode){var FileInstanceId=fluidPlayerClass.getInstanceById(FilePlayerId);if(FileInstanceId.isCurrentlyPlayingAd){return}var FilePlayerTag=document.getElementById(FilePlayerId);FilePlayerTag.currentTime=FileInstanceId.getNewCurrentTimeValueByKeyCode(keyCode,FilePlayerTag.currentTime,FilePlayerTag.duration)},getNewCurrentTimeValueByKeyCode:function(keyCode,currentTime,duration){var newCurrentTime=currentTime;switch(keyCode){case 37:newCurrentTime-=5;newCurrentTime=newCurrentTime<5?0:newCurrentTime;break;case 39:newCurrentTime+=5;newCurrentTime=newCurrentTime>duration-5?duration:newCurrentTime;break;case 35:newCurrentTime=duration;break;case 36:newCurrentTime=0;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:if(keyCode<58&&keyCode>47){var percent=(keyCode-48)*10;newCurrentTime=duration*percent/100}break}return newCurrentTime},handleMouseleave:function(event){var playerElement=this;var FileInstanceId=fluidPlayerClass.getInstanceIdByWrapperId(playerElement.getAttribute("id"));var FilePlayerInstance=fluidPlayerClass.getInstanceById(FileInstanceId);if(typeof event.clientX!=="undefined"&&document.getElementById("fluid_File_wrapper_"+FileInstanceId).contains(document.elementFromPoint(event.clientX,event.clientY))){return}FilePlayerInstance.hideControlBar.call(playerElement);FilePlayerInstance.hideTitle.call(playerElement)},handleMouseenterForKeyboard:function(){var FileInstanceId=fluidPlayerClass.getInstanceIdByWrapperId(this.getAttribute("id"));var FilePlayerInstance=fluidPlayerClass.getInstanceById(FileInstanceId);var FilePlayerTag=document.getElementById(FileInstanceId);if(FilePlayerInstance.captureKey){return}FilePlayerInstance.captureKey=function(event){event.stopPropagation();var keyCode=event.keyCode;switch(keyCode){case 70:FilePlayerInstance.fullscreenToggle();event.preventDefault();break;case 13:case 32:FilePlayerInstance.playPauseToggle(FilePlayerTag);event.preventDefault();break;case 77:FilePlayerInstance.muteToggle(FileInstanceId);event.preventDefault();break;case 38:FilePlayerInstance.volumeChange(FileInstanceId,"asc");event.preventDefault();break;case 40:FilePlayerInstance.volumeChange(FileInstanceId,"desc");event.preventDefault();break;case 37:case 39:case 35:case 36:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:FilePlayerInstance.currentTimeChange(FileInstanceId,keyCode);event.preventDefault();break}return false};document.addEventListener("keydown",FilePlayerInstance.captureKey,true)},keyboardControl:function(){var player=this;var FilePlayer=document.getElementById("fluid_File_wrapper_"+player.FilePlayerId);FilePlayer.addEventListener("click",player.handleMouseenterForKeyboard,false);window.addEventListener("click",function(e){var FileInstanceId=player.FilePlayerId;var FilePlayerInstance=fluidPlayerClass.getInstanceById(FileInstanceId);if(document.getElementById("fluid_File_wrapper_"+FileInstanceId).contains(e.target)||e.target.id=="skipHref_"+FileInstanceId){}else{document.removeEventListener("keydown",FilePlayerInstance.captureKey,true);delete FilePlayerInstance["captureKey"];if(FilePlayerInstance.theatreMode&&!FilePlayerInstance.theatreModeAdvanced){FilePlayerInstance.theatreToggle()}}})},initialPlay:function(){var FilePlayerTag=this;var player=fluidPlayerClass.getInstanceById(FilePlayerTag.id);FilePlayerTag.addEventListener("playing",function(){player.toggleLoader(false)});FilePlayerTag.addEventListener("waiting",function(){player.toggleLoader(true)});if(!player.displayOptions.layoutControls.playButtonShowing){var initialControlsDisplay=document.getElementById(player.FilePlayerId+"_fluid_controls_container");initialControlsDisplay.classList.remove("initial_controls_show");var fpPlayer=document.getElementById(player.FilePlayerId+"_logo");if(fpPlayer){fpPlayer.classList.remove("initial_controls_show")}}if(!player.firstPlayLaunched){player.playPauseToggle(FilePlayerTag);FilePlayerTag.removeEventListener("play",player.initialPlay)}},playPauseToggle:function(FilePlayerTag){var player=fluidPlayerClass.getInstanceById(FilePlayerTag.id);var isFirstStart=!player.firstPlayLaunched;var preRolls=player.findRoll("preRoll");if(!isFirstStart||preRolls.length==0){if(isFirstStart&&preRolls.length==0){player.firstPlayLaunched=true;player.displayOptions.vastOptions.vastAdvanced.noVastFileCallback()}if(FilePlayerTag.paused){if(player.dashPlayer){player.dashPlayer.play()}else{FilePlayerTag.play()}this.playPauseAnimationToggle(true)}else if(!isFirstStart){FilePlayerTag.pause();this.playPauseAnimationToggle(false)}player.toggleOnPauseAd()}else{var browserVersion=fluidPlayerClass.getBrowserVersion();player.isCurrentlyPlayingAd=true;if(browserVersion.browserName=="Safari"||player.mobileInfo.userOs!==false&&player.mobileInfo.userOs=="Android"&&browserVersion.browserName=="Google Chrome"){FilePlayerTag.src=fluidPlayerScriptLocation+"blank.mp4";FilePlayerTag.play();this.playPauseAnimationToggle(true)}player.firstPlayLaunched=true;player.prepareVast("preRoll");player.preRollAdPodsLength=preRolls.length}var prepareVastAdsThatKnowDuration=function(){player.prepareVast("onPauseRoll");player.prepareVast("postRoll");player.prepareVast("midRoll")};if(isFirstStart){var pseudoPoster=document.getElementById(player.FilePlayerId+"_fluid_pseudo_poster");if(pseudoPoster){pseudoPoster.parentNode.removeChild(pseudoPoster)}if(player.mainFileDuration>0){prepareVastAdsThatKnowDuration()}else{FilePlayerTag.addEventListener("mainFileDurationSet",prepareVastAdsThatKnowDuration)}}player.adTimer();var blockOnPause=document.getElementById(player.FilePlayerId+"_fluid_html_on_pause");if(blockOnPause&&!player.isCurrentlyPlayingAd){if(FilePlayerTag.paused){blockOnPause.style.display="flex"}else{blockOnPause.style.display="none"}}},setCustomControls:function(){var player=this;var FilePlayerTag=document.getElementById(this.FilePlayerId);document.getElementById(this.FilePlayerId+"_fluid_control_playpause").addEventListener("click",function(){if(!player.firstPlayLaunched){FilePlayerTag.removeEventListener("play",player.initialPlay)}player.playPauseToggle(FilePlayerTag)},false);document.getElementById(player.FilePlayerId).addEventListener("play",function(){player.controlPlayPauseToggle(player.FilePlayerId);player.contolVolumebarUpdate(player.FilePlayerId)},false);document.getElementById(player.FilePlayerId).addEventListener("fluidplayerpause",function(){player.controlPlayPauseToggle(player.FilePlayerId)},false);FilePlayerTag.addEventListener("timeupdate",function(){player.contolProgressbarUpdate(player.FilePlayerId);player.contolDurationUpdate(player.FilePlayerId)});var isMobileChecks=fluidPlayerClass.getMobileOs();var eventOn=isMobileChecks.userOs?"touchstart":"mousedown";document.getElementById(player.FilePlayerId+"_fluid_controls_progress_container").addEventListener(eventOn,function(event){player.onProgressbarMouseDown(player.FilePlayerId,event)},false);document.getElementById(player.FilePlayerId+"_fluid_control_volume_container").addEventListener(eventOn,function(event){player.onVolumebarMouseDown(player.FilePlayerId)},false);FilePlayerTag.addEventListener("volumechange",function(){player.contolVolumebarUpdate(player.FilePlayerId)});document.getElementById(player.FilePlayerId+"_fluid_control_mute").addEventListener("click",function(){player.muteToggle(player.FilePlayerId)});player.setBuffering();document.getElementById(player.FilePlayerId+"_fluid_control_fullscreen").addEventListener("click",function(){player.fullscreenToggle()});if(player.displayOptions.layoutControls.allowTheatre&&!player.isInIframe){document.getElementById(player.FilePlayerId+"_fluid_control_theatre").addEventListener("click",function(){player.theatreToggle(player.FilePlayerId)})}else{document.getElementById(player.FilePlayerId+"_fluid_control_theatre").style.display="none"}FilePlayerTag.addEventListener("ratechange",function(){if(player.isCurrentlyPlayingAd){this.playbackRate=1}})},createTimePositionPreview:function(){var player=this;var FilePlayer=document.getElementById(player.FilePlayerId);if(!player.showTimeOnHover){return}var progressContainer=document.getElementById(player.FilePlayerId+"_fluid_controls_progress_container");var previewContainer=document.createElement("div");previewContainer.id=player.FilePlayerId+"_fluid_timeline_preview";previewContainer.className="fluid_timeline_preview";previewContainer.style.display="none";previewContainer.style.position="absolute";progressContainer.appendChild(previewContainer);document.getElementById(player.FilePlayerId+"_fluid_controls_progress_container").addEventListener("mousemove",function(event){var progressContainer=document.getElementById(player.FilePlayerId+"_fluid_controls_progress_container");var totalWidth=progressContainer.clientWidth;var hoverTimeItem=document.getElementById(player.FilePlayerId+"_fluid_timeline_preview");var hoverQ=fluidPlayerClass.getEventOffsetX(event,progressContainer);hoverSecondQ=player.currentFileDuration*hoverQ/totalWidth;showad=player.formatTime(hoverSecondQ);hoverTimeItem.innerText=showad;hoverTimeItem.style.display="block";hoverTimeItem.style.left=hoverSecondQ/FilePlayer.duration*100+"%"},false);document.getElementById(player.FilePlayerId+"_fluid_controls_progress_container").addEventListener("mouseout",function(){var hoverTimeItem=document.getElementById(player.FilePlayerId+"_fluid_timeline_preview");hoverTimeItem.style.display="none"},false)},setCustomContextMenu:function(){var player=this;var FilePlayerTag=document.getElementById(player.FilePlayerId);var playerWrapper=document.getElementById("fluid_File_wrapper_"+player.FilePlayerId);var divContextMenu=document.createElement("div");divContextMenu.id=player.FilePlayerId+"_fluid_context_menu";divContextMenu.className="fluid_context_menu";divContextMenu.style.display="none";divContextMenu.style.position="absolute";divContextMenu.innerHTML="<ul>"+'    <li id="'+player.FilePlayerId+'context_option_play">'+this.displayOptions.captions.play+"</li>"+'    <li id="'+player.FilePlayerId+'context_option_mute">'+this.displayOptions.captions.mute+"</li>"+'    <li id="'+player.FilePlayerId+'context_option_fullscreen">'+this.displayOptions.captions.fullscreen+"</li>"+'    <li id="'+player.FilePlayerId+'context_option_homepage">Fluid Player '+player.version+"</li>"+"</ul>";FilePlayerTag.parentNode.insertBefore(divContextMenu,FilePlayerTag.nextSibling);playerWrapper.addEventListener("contextmenu",function(event){event.preventDefault();divContextMenu.style.left=fluidPlayerClass.getEventOffsetX(event,FilePlayerTag)+"px";divContextMenu.style.top=fluidPlayerClass.getEventOffsetY(event,FilePlayerTag)+"px";divContextMenu.style.display="block"},false);document.addEventListener("click",function(event){if(event.target!==FilePlayerTag||event.button!==2){divContextMenu.style.display="none"}},false);var menuOptionPlay=document.getElementById(player.FilePlayerId+"context_option_play");var menuOptionMute=document.getElementById(player.FilePlayerId+"context_option_mute");var menuOptionFullscreen=document.getElementById(player.FilePlayerId+"context_option_fullscreen");var menuOptionHomepage=document.getElementById(player.FilePlayerId+"context_option_homepage");menuOptionPlay.addEventListener("click",function(){player.playPauseToggle(FilePlayerTag)},false);menuOptionMute.addEventListener("click",function(){player.muteToggle(player.FilePlayerId)},false);menuOptionFullscreen.addEventListener("click",function(){player.fullscreenToggle()},false);menuOptionHomepage.addEventListener("click",function(){var win=window.open(player.homepage,"_blank");win.focus()},false)},setDefaultLayout:function(){var player=this;var FilePlayerTag=document.getElementById(player.FilePlayerId);var playerWrapper=document.getElementById("fluid_File_wrapper_"+player.FilePlayerId);playerWrapper.className+=" fluid_player_layout_"+player.displayOptions.layoutControls.layout;FilePlayerTag.removeAttribute("controls");player.setCustomContextMenu();var classForDisablingVolumeBar="";if(!player.checkShouldDisplayVolumeBar()){classForDisablingVolumeBar=" no_volume_bar"}var divVastControls=document.createElement("div");divVastControls.id=player.FilePlayerId+"_fluid_controls_container";divVastControls.className="fluid_controls_container"+classForDisablingVolumeBar;divVastControls.innerHTML=player.generateCustomControlTags();FilePlayerTag.parentNode.insertBefore(divVastControls,FilePlayerTag.nextSibling);var divLoading=document.createElement("div");divLoading.className="vast_File_loading";divLoading.id="vast_File_loading_"+player.FilePlayerId;divLoading.style.display="none";var backgroundColor=player.displayOptions.layoutControls.primaryColor?player.displayOptions.layoutControls.primaryColor:"white";document.getElementById(player.FilePlayerId+"_vast_control_currentprogress").style.backgroundColor=backgroundColor;FilePlayerTag.parentNode.insertBefore(divLoading,FilePlayerTag.nextSibling);var remainingAttemptsToInitiateVolumeBar=100;var initiateVolumebar=function(){if(!remainingAttemptsToInitiateVolumeBar){clearInterval(initiateVolumebarTimerId)}else if(player.checkIfVolumebarIsRendered()){clearInterval(initiateVolumebarTimerId);player.contolVolumebarUpdate(player.FilePlayerId)}else{remainingAttemptsToInitiateVolumeBar--}};if(player.displayOptions.layoutControls.doubleclickFullscreen){FilePlayerTag.addEventListener("dblclick",function(){player.fullscreenToggle()},false)}var initiateVolumebarTimerId=setInterval(initiateVolumebar,100);player.initHtmlOnPauseBlock();player.setCustomControls();player.setupThumbnailPreview();player.createTimePositionPreview();player.posterImage();player.initPlayButton();player.setFilePreload();player.createPlaybackList();player.createDownload()},checkIfVolumebarIsRendered:function(){var player=this;var volumeposTag=document.getElementById(player.FilePlayerId+"_fluid_control_volume_currentpos");var volumebarTotalWidth=document.getElementById(player.FilePlayerId+"_fluid_control_volume").clientWidth;var volumeposTagWidth=volumeposTag.clientWidth;if(volumeposTagWidth===volumebarTotalWidth){return false}return true},setLayout:function(){var player=this;var FilePlayerTag=document.getElementById(player.FilePlayerId);var listenTo=fluidPlayerClass.isTouchDevice()?"touchend":"click";document.getElementById(this.FilePlayerId).addEventListener(listenTo,function(){player.playPauseToggle(FilePlayerTag)},false);FilePlayerTag.addEventListener("play",player.initialPlay,false);this.setDefaultLayout()},handleFullscreen:function(){var player=this;if(typeof document.vastFullsreenChangeEventListenersAdded==="undefined"){["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"].forEach(function(eventType){if(typeof document["on"+eventType]==="object"){document.addEventListener(eventType,function(ev){player.recalculateAdDimensions(fluidPlayerClass.activeFilePlayerId)},false)}});document.vastFullsreenChangeEventListenersAdded=true}},setupThumbnailPreviewVtt:function(){var player=this;player.sendRequest(player.displayOptions.layoutControls.timelinePreview.file,true,player.displayOptions.vastOptions.vastTimeout,function(){var convertVttRawData=function(vttRawData){if(!(typeof vttRawData.cues!=="undefined"&&vttRawData.cues.length)){return[]}var result=[];var tempThumbnailData=null;var tempThumbnailCoordinates=null;for(var i=0;i<vttRawData.cues.length;i++){tempThumbnailData=vttRawData.cues[i].text.split("#");var xCoords=0,yCoords=0,wCoords=122.5,hCoords=69;if(tempThumbnailData.length===2&&tempThumbnailData[1].indexOf("xywh=")===0){tempThumbnailCoordinates=tempThumbnailData[1].substring(5);tempThumbnailCoordinates=tempThumbnailCoordinates.split(",");if(tempThumbnailCoordinates.length===4){player.displayOptions.layoutControls.timelinePreview.spriteImage=true;xCoords=parseInt(tempThumbnailCoordinates[0]);yCoords=parseInt(tempThumbnailCoordinates[1]);wCoords=parseInt(tempThumbnailCoordinates[2]);hCoords=parseInt(tempThumbnailCoordinates[3])}}if(player.displayOptions.layoutControls.timelinePreview.spriteRelativePath&&player.displayOptions.layoutControls.timelinePreview.file.indexOf("/")!==-1&&(typeof player.displayOptions.layoutControls.timelinePreview.sprite==="undefined"||player.displayOptions.layoutControls.timelinePreview.sprite=="")){imageUrl=player.displayOptions.layoutControls.timelinePreview.file.substring(0,player.displayOptions.layoutControls.timelinePreview.file.lastIndexOf("/"));imageUrl+="/"+tempThumbnailData[0]}else{imageUrl=player.displayOptions.layoutControls.timelinePreview.sprite?player.displayOptions.layoutControls.timelinePreview.sprite:tempThumbnailData[0]}result.push({startTime:vttRawData.cues[i].startTime,endTime:vttRawData.cues[i].endTime,image:imageUrl,x:xCoords,y:yCoords,w:wCoords,h:hCoords})}return result};var xmlHttpReq=this;if(xmlHttpReq.readyState===4&&xmlHttpReq.status!==200){return}if(!(xmlHttpReq.readyState===4&&xmlHttpReq.status===200)){return}var textResponse=xmlHttpReq.responseText;var webVttParser=new WebVTTParser;var vttRawData=webVttParser.parse(textResponse);player.timelinePreviewData=convertVttRawData(vttRawData)})},generateTimelinePreviewTags:function(){var player=this;var progressContainer=document.getElementById(player.FilePlayerId+"_fluid_controls_progress_container");var previewContainer=document.createElement("div");previewContainer.id=player.FilePlayerId+"_fluid_timeline_preview_container";previewContainer.className="fluid_timeline_preview_container";previewContainer.style.display="none";previewContainer.style.position="absolute";progressContainer.appendChild(previewContainer);var previewContainerShadow=document.createElement("div");previewContainerShadow.id=player.FilePlayerId+"_fluid_timeline_preview_container_shadow";previewContainerShadow.className="fluid_timeline_preview_container_shadow";previewContainerShadow.style.position="absolute";previewContainerShadow.style.display="none";previewContainerShadow.style.opacity=1;progressContainer.appendChild(previewContainerShadow)},getThumbnailCoordinates:function(second){var player=this;if(player.timelinePreviewData.length){for(var i=0;i<player.timelinePreviewData.length;i++){if(second>=player.timelinePreviewData[i].startTime&&second<=player.timelinePreviewData[i].endTime){return player.timelinePreviewData[i]}}}return false},drawTimelinePreview:function(event){var player=this;var timelinePreviewTag=document.getElementById(player.FilePlayerId+"_fluid_timeline_preview_container");var timelinePreviewShadow=document.getElementById(player.FilePlayerId+"_fluid_timeline_preview_container_shadow");var progressContainer=document.getElementById(player.FilePlayerId+"_fluid_controls_progress_container");var totalWidth=progressContainer.clientWidth;if(player.isCurrentlyPlayingAd){if(timelinePreviewTag.style.display!=="none"){timelinePreviewTag.style.display="none"}return}var hoverX=fluidPlayerClass.getEventOffsetX(event,progressContainer);var hoverSecond=null;if(totalWidth){hoverSecond=player.currentFileDuration*hoverX/totalWidth;var thumbnailCoordinates=player.getThumbnailCoordinates(hoverSecond);timelinePreviewShadow.style.width=totalWidth+"px";timelinePreviewShadow.style.display="block";if(thumbnailCoordinates!==false){timelinePreviewTag.style.width=thumbnailCoordinates.w+"px";timelinePreviewTag.style.height=thumbnailCoordinates.h+"px";timelinePreviewShadow.style.height=thumbnailCoordinates.h+"px";timelinePreviewTag.style.background="url("+thumbnailCoordinates.image+") no-repeat scroll -"+thumbnailCoordinates.x+"px -"+thumbnailCoordinates.y+"px";timelinePreviewTag.style.left=hoverX-thumbnailCoordinates.w/2+"px";timelinePreviewTag.style.display="block";if(!player.displayOptions.layoutControls.timelinePreview.spriteImage){timelinePreviewTag.style.backgroundSize="contain"}}else{timelinePreviewTag.style.display="none"}}},setupThumbnailPreview:function(){var player=this;if(player.displayOptions.layoutControls.timelinePreview&&typeof player.displayOptions.layoutControls.timelinePreview.file==="string"&&typeof player.displayOptions.layoutControls.timelinePreview.type==="string"){switch(player.displayOptions.layoutControls.timelinePreview.type){case"VTT":fluidPlayerClass.requestScript(fluidPlayerScriptLocation+fluidPlayerClass.vttParserScript,player.setupThumbnailPreviewVtt.bind(this));var eventOn="mousemove";var eventOff="mouseleave";if(player.mobileInfo.userOs){eventOn="touchmove";eventOff="touchend"}document.getElementById(player.FilePlayerId+"_fluid_controls_progress_container").addEventListener(eventOn,player.drawTimelinePreview.bind(player),false);document.getElementById(player.FilePlayerId+"_fluid_controls_progress_container").addEventListener(eventOff,function(event){var progress=document.getElementById(player.FilePlayerId+"_fluid_controls_progress_container");if(typeof event.clientX!=="undefined"&&progress.contains(document.elementFromPoint(event.clientX,event.clientY))){return}document.getElementById(player.FilePlayerId+"_fluid_timeline_preview_container").style.display="none";document.getElementById(player.FilePlayerId+"_fluid_timeline_preview_container_shadow").style.display="none"},false);player.generateTimelinePreviewTags();break;default:break}player.showTimeOnHover=false}},setupPlayerWrapper:function(){var player=this;var FilePlayer=document.getElementById(player.FilePlayerId);var divFileWrapper=document.createElement("div");divFileWrapper.className=fluidPlayerClass.isTouchDevice()?"fluid_File_wrapper mobile":"fluid_File_wrapper";divFileWrapper.id="fluid_File_wrapper_"+player.FilePlayerId;if(player.displayOptions.layoutControls.fillToContainer){divFileWrapper.style.width="100%";divFileWrapper.style.height="100%"}else{divFileWrapper.style.height=FilePlayer.clientHeight+"px";divFileWrapper.style.width=FilePlayer.clientWidth+"px"}FilePlayer.style.height="100%";FilePlayer.style.width="100%";FilePlayer.parentNode.insertBefore(divFileWrapper,FilePlayer);divFileWrapper.appendChild(FilePlayer)},onErrorDetection:function(){var FilePlayerTag=this;var player=fluidPlayerClass.getInstanceById(FilePlayerTag.id);if(FilePlayerTag.networkState===FilePlayerTag.NETWORK_NO_SOURCE&&player.isCurrentlyPlayingAd){player.playMainFileWhenVastFails(401)}},subtitleFetchParse:function(subtitleItem){var player=this;var FilePlayerTag=document.getElementById(player.FilePlayerId);player.sendRequest(subtitleItem.url,true,player.displayOptions.vastOptions.vastTimeout,function(){var convertVttRawData=function(vttRawData){if(!(typeof vttRawData.cues!=="undefined"&&vttRawData.cues.length)){return[]}var result=[];for(var i=0;i<vttRawData.cues.length;i++){tempThumbnailData=vttRawData.cues[i].text.split("#");result.push({startTime:vttRawData.cues[i].startTime,endTime:vttRawData.cues[i].endTime,text:vttRawData.cues[i].text,cue:vttRawData.cues[i]})}return result};var xmlHttpReq=this;if(xmlHttpReq.readyState===4&&xmlHttpReq.status!==200){return}if(!(xmlHttpReq.readyState===4&&xmlHttpReq.status===200)){return}var textResponse=xmlHttpReq.responseText;var parser=new WebVTT.Parser(window,WebVTT.StringDecoder());var cues=[];var regions=[];parser.oncue=function(cue){cues.push(cue)};parser.onregion=function(region){regions.push(region)};parser.parse(textResponse);parser.flush();player.subtitlesData=cues})},createSubtitlesSwitch:function(){var player=this;var FilePlayer=document.getElementById(player.FilePlayerId);var subtitlesOff="OFF";player.subtitlesData=[];if(player.displayOptions.layoutControls.subtitlesEnabled){var tracks=[];tracks.push({label:subtitlesOff,url:"na",lang:subtitlesOff});var tracksList=FilePlayer.querySelectorAll("track");[].forEach.call(tracksList,function(track){if(track.kind==="metadata"&&track.src){tracks.push({label:track.label,url:track.src,lang:track.srclang})}});player.subtitlesTracks=tracks;var subtitlesChangeButton=document.getElementById(player.FilePlayerId+"_fluid_control_subtitles");var appendSubtitleChange=false;var subtitlesChangeList=document.createElement("div");subtitlesChangeList.id=player.FilePlayerId+"_fluid_control_subtitles_list";subtitlesChangeList.className="fluid_subtitles_list";subtitlesChangeList.style.display="none";var firstSubtitle=true;player.subtitlesTracks.forEach(function(subtitle){var subtitleSelected=firstSubtitle?"subtitle_selected":"";firstSubtitle=false;var subtitlesChangeDiv=document.createElement("div");subtitlesChangeDiv.id="subtitle_"+player.FilePlayerId+"_"+subtitle.label;subtitlesChangeDiv.className="fluid_subtitle_list_item";subtitlesChangeDiv.innerHTML='<span class="subtitle_button_icon '+subtitleSelected+'"></span>'+subtitle.label;subtitlesChangeDiv.addEventListener("click",function(event){event.stopPropagation();var subtitleChangedTo=this;var subtitleIcons=document.getElementsByClassName("subtitle_button_icon");for(var i=0;i<subtitleIcons.length;i++){subtitleIcons[i].className=subtitleIcons[i].className.replace("subtitle_selected","")}subtitleChangedTo.firstChild.className+=" subtitle_selected";player.subtitlesTracks.forEach(function(subtitle){if(subtitle.label==subtitleChangedTo.innerText.replace(/(\r\n\t|\n|\r\t)/gm,"")){if(subtitle.label===subtitlesOff){player.subtitlesData=[]}else{player.subtitleFetchParse(subtitle)}}});player.openCloseSubtitlesSwitch()});subtitlesChangeList.appendChild(subtitlesChangeDiv);appendSubtitleChange=true});if(appendSubtitleChange){subtitlesChangeButton.appendChild(subtitlesChangeList);subtitlesChangeButton.addEventListener("click",function(){player.openCloseSubtitlesSwitch()})}else{document.getElementById(player.FilePlayerId+"_fluid_control_subtitles").style.display="none"}}else{document.getElementById(player.FilePlayerId+"_fluid_control_subtitles").style.display="none"}var FilePlayerSubtitlesUpdate=function(){player.renderSubtitles()};FilePlayer.addEventListener("timeupdate",FilePlayerSubtitlesUpdate)},renderSubtitles:function(){var player=this;var FilePlayer=document.getElementById(player.FilePlayerId);var currentTime=Math.floor(FilePlayer.currentTime);var subtitlesAvailable=false;var subtitlesContainer=document.getElementById(player.FilePlayerId+"_fluid_subtitles_container");if(player.isCurrentlyPlayingAd){subtitlesContainer.innerHTML="";return}var currentTime=Math.floor(FilePlayer.currentTime);var subtitlesAvailable=false;var subtitlesContainer=document.getElementById(player.FilePlayerId+"_fluid_subtitles_container");for(var i=0;i<player.subtitlesData.length;i++){if(currentTime>=player.subtitlesData[i].startTime&&currentTime<=player.subtitlesData[i].endTime){subtitlesContainer.innerHTML="";subtitlesContainer.appendChild(WebVTT.convertCueToDOMTree(window,player.subtitlesData[i].text));subtitlesAvailable=true}}if(!subtitlesAvailable){subtitlesContainer.innerHTML=""}},openCloseSubtitlesSwitch:function(){var player=this;var subtitleChangeList=document.getElementById(this.FilePlayerId+"_fluid_control_subtitles_list");var sourceChangeListContainer=document.getElementById(this.FilePlayerId+"_fluid_control_subtitles");if(player.isCurrentlyPlayingAd){subtitleChangeList.style.display="none";return}if(subtitleChangeList.style.display=="none"){subtitleChangeList.style.display="block";var mouseOut=function(event){sourceChangeListContainer.removeEventListener("mouseleave",mouseOut);subtitleChangeList.style.display="none"};sourceChangeListContainer.addEventListener("mouseleave",mouseOut)}else{subtitleChangeList.style.display="none"}},createSubtitles:function(){var player=this;var FilePlayerTag=document.getElementById(player.FilePlayerId);var divSubtitlesContainer=document.createElement("div");divSubtitlesContainer.id=player.FilePlayerId+"_fluid_subtitles_container";divSubtitlesContainer.className="fluid_subtitles_container";FilePlayerTag.parentNode.insertBefore(divSubtitlesContainer,FilePlayerTag.nextSibling);fluidPlayerClass.requestScript(fluidPlayerScriptLocation+fluidPlayerClass.subtitlesParseScript,player.createSubtitlesSwitch.bind(this))},createFileSourceSwitch:function(){var player=this;var FilePlayer=document.getElementById(player.FilePlayerId);var sources=[];var sourcesList=FilePlayer.querySelectorAll("source");[].forEach.call(sourcesList,function(source){if(source.title&&source.src){sources.push({title:source.title,url:source.src,isHD:source.getAttribute("data-fluid-hd")!=null})}});player.FileSources=sources;if(player.FileSources.length>1){var sourceChangeButton=document.getElementById(player.FilePlayerId+"_fluid_control_File_source");var appendSourceChange=false;var sourceChangeList=document.createElement("div");sourceChangeList.id=player.FilePlayerId+"_fluid_control_File_source_list";sourceChangeList.className="fluid_File_sources_list";sourceChangeList.style.display="none";var firstSource=true;player.FileSources.forEach(function(source){var getTheType=source.url.split(".").pop();if(player.mobileInfo.userOs=="iOS"&&getTheType=="mkv"){return}var sourceSelected=firstSource?"source_selected":"";var hdElement=source.isHD?'<sup style="color:'+player.displayOptions.layoutControls.primaryColor+'" class="fp_hd_source"></sup>':"";firstSource=false;var sourceChangeDiv=document.createElement("div");sourceChangeDiv.id="source_"+player.FilePlayerId+"_"+source.title;sourceChangeDiv.className="fluid_File_source_list_item";sourceChangeDiv.innerHTML='<span class="source_button_icon '+sourceSelected+'"></span>'+source.title+hdElement;sourceChangeDiv.addEventListener("click",function(event){FilePlayer.style.width=FilePlayer.clientWidth+"px";FilePlayer.style.height=FilePlayer.clientHeight+"px";event.stopPropagation();var FileChangedTo=this;var sourceIcons=document.getElementsByClassName("source_button_icon");for(var i=0;i<sourceIcons.length;i++){sourceIcons[i].className=sourceIcons[i].className.replace("source_selected","")}FileChangedTo.firstChild.className+=" source_selected";player.FileSources.forEach(function(source){if(source.title==FileChangedTo.innerText.replace(/(\r\n\t|\n|\r\t)/gm,"")){player.setBuffering();player.setFileSource(source.url);player.fluidStorage.fluidQuality=source.title}});player.openCloseFileSourceSwitch()});sourceChangeList.appendChild(sourceChangeDiv);appendSourceChange=true});if(appendSourceChange){sourceChangeButton.appendChild(sourceChangeList);sourceChangeButton.addEventListener("click",function(){player.openCloseFileSourceSwitch()})}else{document.getElementById(player.FilePlayerId+"_fluid_control_File_source").style.display="none"}}else{document.getElementById(player.FilePlayerId+"_fluid_control_File_source").style.display="none"}},openCloseFileSourceSwitch:function(){var player=this;var sourceChangeList=document.getElementById(this.FilePlayerId+"_fluid_control_File_source_list");var sourceChangeListContainer=document.getElementById(this.FilePlayerId+"_fluid_control_File_source");if(player.isCurrentlyPlayingAd){sourceChangeList.style.display="none";return}if(sourceChangeList.style.display=="none"){sourceChangeList.style.display="block";var mouseOut=function(event){sourceChangeListContainer.removeEventListener("mouseleave",mouseOut);sourceChangeList.style.display="none"};sourceChangeListContainer.addEventListener("mouseleave",mouseOut)}else{sourceChangeList.style.display="none"}},setFileSource:function(url){var player=this;var FilePlayerTag=document.getElementById(player.FilePlayerId);if(player.mobileInfo.userOs=="iOS"&&url.indexOf(".mkv")>0){console.log("[FP_ERROR] .mkv files not supported by iOS devices.");return false}if(player.isCurrentlyPlayingAd){player.originalSrc=url}else{player.isSwitchingSource=true;var play=false;if(!FilePlayerTag.paused){FilePlayerTag.pause();play=true}var currentTime=FilePlayerTag.currentTime;player.setCurrentTimeAndPlay(currentTime,play);FilePlayerTag.src=url;player.originalSrc=url;player.displayOptions.layoutControls.mediaType=player.getCurrentSrcType();player.initialiseStreamers()}},setCurrentTimeAndPlay:function(newCurrentTime,shouldPlay){var FilePlayerTag=document.getElementById(this.FilePlayerId);var player=this;var loadedMetadata=function(){FilePlayerTag.currentTime=newCurrentTime;FilePlayerTag.removeEventListener("loadedmetadata",loadedMetadata);if(player.mobileInfo.userOs=="iOS"||player.getBrowserVersion().browserName.toLowerCase()==="safari"){FilePlayerTag.addEventListener("playing",FilePlayStart)}if(shouldPlay){FilePlayerTag.play()}player.isSwitchingSource=false;FilePlayerTag.style.width="100%";FilePlayerTag.style.height="100%"};var FilePlayStart=function(){this.currentTime=newCurrentTime;FilePlayerTag.removeEventListener("playing",FilePlayStart)};FilePlayerTag.addEventListener("loadedmetadata",loadedMetadata,false);FilePlayerTag.load()},initTitle:function(){var player=this;var FilePlayer=document.getElementById(player.FilePlayerId);if(player.displayOptions.layoutControls.title){var titleHolder=document.createElement("div");titleHolder.id=player.FilePlayerId+"_title";FilePlayer.parentNode.insertBefore(titleHolder,null);titleHolder.innerHTML+=player.displayOptions.layoutControls.title;titleHolder.classList.add("fp_title")}},hasTitle:function(){var title=document.getElementById(this.FilePlayerId+"_title");var titleOption=this.displayOptions.layoutControls.title;return title&&titleOption!=null?true:false},hideTitle:function(){var FileInstanceId=fluidPlayerClass.getInstanceIdByWrapperId(this.getAttribute("id"));var FilePlayerInstance=fluidPlayerClass.getInstanceById(FileInstanceId);var FilePlayerTag=document.getElementById(FileInstanceId);var titleHolder=document.getElementById(FilePlayerInstance.FilePlayerId+"_title");if(FilePlayerInstance.hasTitle()){titleHolder.classList.add("fade_out")}},showTitle:function(){var FileInstanceId=fluidPlayerClass.getInstanceIdByWrapperId(this.getAttribute("id"));var FilePlayerInstance=fluidPlayerClass.getInstanceById(FileInstanceId);var FilePlayerTag=document.getElementById(FileInstanceId);var titleHolder=document.getElementById(FilePlayerInstance.FilePlayerId+"_title");if(FilePlayerInstance.hasTitle()){titleHolder.classList.remove("fade_out")}},initLogo:function(){var player=this;var FilePlayer=document.getElementById(player.FilePlayerId);if(!player.displayOptions.layoutControls.logo.imageUrl){return}var logoHolder=document.createElement("div");logoHolder.id=player.FilePlayerId+"_logo";var hideClass="logo_maintain_display";if(player.displayOptions.layoutControls.logo.hideWithControls){hideClass="initial_controls_show"}logoHolder.classList.add(hideClass,"fp_logo");var logoImage=document.createElement("img");logoImage.id=player.FilePlayerId+"_logo_image";if(player.displayOptions.layoutControls.logo.imageUrl){logoImage.src=player.displayOptions.layoutControls.logo.imageUrl}logoImage.style.position="absolute";logoImage.style.margin=player.displayOptions.layoutControls.logo.imageMargin;var logoPosition=player.displayOptions.layoutControls.logo.position.toLowerCase();if(logoPosition.indexOf("bottom")!==-1){logoImage.style.bottom=0}else{logoImage.style.top=0}if(logoPosition.indexOf("right")!==-1){logoImage.style.right=0}else{logoImage.style.left=0}if(player.displayOptions.layoutControls.logo.opacity){logoImage.style.opacity=player.displayOptions.layoutControls.logo.opacity}if(player.displayOptions.layoutControls.logo.clickUrl!==null){logoImage.style.cursor="pointer";logoImage.addEventListener("click",function(){var win=window.open(player.displayOptions.layoutControls.logo.clickUrl,"_blank");win.focus()})}if(player.displayOptions.layoutControls.logo.mouseOverImageUrl){logoImage.addEventListener("mouseover",function(){logoImage.src=player.displayOptions.layoutControls.logo.mouseOverImageUrl},false);logoImage.addEventListener("mouseout",function(){logoImage.src=player.displayOptions.layoutControls.logo.imageUrl},false)}FilePlayer.parentNode.insertBefore(logoHolder,null);logoHolder.appendChild(logoImage,null)},initHtmlOnPauseBlock:function(){var player=this;if(player.hasValidOnPauseAd()){return}if(!player.displayOptions.layoutControls.htmlOnPauseBlock.html){return}var FilePlayer=document.getElementById(player.FilePlayerId);var containerDiv=document.createElement("div");containerDiv.id=player.FilePlayerId+"_fluid_html_on_pause";containerDiv.className="fluid_html_on_pause";containerDiv.style.display="none";containerDiv.innerHTML=player.displayOptions.layoutControls.htmlOnPauseBlock.html;containerDiv.onclick=function(event){player.playPauseToggle(FilePlayer)};if(player.displayOptions.layoutControls.htmlOnPauseBlock.width){containerDiv.style.width=player.displayOptions.layoutControls.htmlOnPauseBlock.width+"px"}if(player.displayOptions.layoutControls.htmlOnPauseBlock.height){containerDiv.style.height=player.displayOptions.layoutControls.htmlOnPauseBlock.height+"px"}FilePlayer.parentNode.insertBefore(containerDiv,null)},initPlayButton:function(){var player=this;var FilePlayer=document.getElementById(player.FilePlayerId);var containerDiv=document.createElement("div");containerDiv.id=player.FilePlayerId+"_fluid_initial_play_button";containerDiv.className="fluid_html_on_pause";var backgroundColor=player.displayOptions.layoutControls.primaryColor?player.displayOptions.layoutControls.primaryColor:"#333333";containerDiv.innerHTML='<div id="'+player.FilePlayerId+'_fluid_initial_play" class="fluid_initial_play" style="background-color:'+backgroundColor+'"><div id="'+player.FilePlayerId+'_fluid_state_button" class="fluid_initial_play_button"></div></div>';var initPlayFunction=function(){player.playPauseToggle(FilePlayer);containerDiv.removeEventListener("click",initPlayFunction)};containerDiv.addEventListener("click",initPlayFunction);if(!player.displayOptions.layoutControls.playButtonShowing){var initialControlsDisplay=document.getElementById(player.FilePlayerId+"_fluid_controls_container");initialControlsDisplay.classList.add("initial_controls_show");containerDiv.style.opacity="0"}FilePlayer.parentNode.insertBefore(containerDiv,null)},mainFileReady:function(){var FilePlayerTag=this;var player=fluidPlayerClass.getInstanceById(this.id);if(player.mainFileDuration==0&&!player.isCurrentlyPlayingAd&&player.mainFileReadyState===false){player.mainFileDuration=FilePlayerTag.duration;player.mainFileReadyState=true;var event=new CustomEvent("mainFileDurationSet");FilePlayerTag.dispatchEvent(event);FilePlayerTag.removeEventListener("loadedmetadata",player.mainFileReady)}},userActivityChecker:function(){var player=this;var FilePlayer=document.getElementById("fluid_File_wrapper_"+player.FilePlayerId);var FilePlayerTag=document.getElementById(player.FilePlayerId);player.newActivity=null;var isMouseStillDown=false;var activity=function(event){if(event.type==="touchstart"||event.type==="mousedown"){isMouseStillDown=true}if(event.type==="touchend"||event.type==="mouseup"){isMouseStillDown=false}player.newActivity=true};var activityCheck=setInterval(function(){if(player.newActivity===true){if(!isMouseStillDown&&!player.isLoading){player.newActivity=false}if(player.isUserActive===false||!player.isControlBarVisible()){var event=new CustomEvent("userActive");FilePlayerTag.dispatchEvent(event);player.isUserActive=true}clearTimeout(player.inactivityTimeout);player.inactivityTimeout=setTimeout(function(){if(player.newActivity!==true){player.isUserActive=false;event=new CustomEvent("userInactive");FilePlayerTag.dispatchEvent(event)}else{clearTimeout(player.inactivityTimeout)}},player.displayOptions.layoutControls.controlBar.autoHideTimeout*1e3)}},300);var listenTo=fluidPlayerClass.isTouchDevice()?["touchstart","touchmove","touchend"]:["mousemove","mousedown","mouseup"];for(var i=0;i<listenTo.length;i++){FilePlayer.addEventListener(listenTo[i],activity)}},hasControlBar:function(){return document.getElementById(this.FilePlayerId+"_fluid_controls_container")?true:false},isControlBarVisible:function(){var player=this;if(player.hasControlBar()===false){return false}var controlBar=document.getElementById(player.FilePlayerId+"_fluid_controls_container");var style=window.getComputedStyle(controlBar,null);return!(style.opacity==0||style.visibility=="hidden")},setFilePreload:function(){var player=this;var FilePlayerTag=document.getElementById(player.FilePlayerId);FilePlayerTag.setAttribute("preload",this.displayOptions.layoutControls.preload)},hideControlBar:function(){var FileInstanceId=fluidPlayerClass.getInstanceIdByWrapperId(this.getAttribute("id"));var FilePlayerInstance=fluidPlayerClass.getInstanceById(FileInstanceId);var FilePlayerTag=document.getElementById(FileInstanceId);if(FilePlayerInstance.isCurrentlyPlayingAd&&!FilePlayerTag.paused){FilePlayerInstance.toggleAdCountdown(true)}if(FilePlayerInstance.hasControlBar()){var divVastControls=document.getElementById(FilePlayerInstance.FilePlayerId+"_fluid_controls_container");var fpLogo=document.getElementById(FilePlayerInstance.FilePlayerId+"_logo");if(FilePlayerInstance.displayOptions.layoutControls.controlBar.animated){divVastControls.classList.remove("fade_in");divVastControls.classList.add("fade_out");if(fpLogo){fpLogo.classList.remove("fade_in");fpLogo.classList.add("fade_out")}}else{divVastControls.style.display="none";if(fpLogo){fpLogo.style.display="none"}}}FilePlayerTag.style.cursor="none"},showControlBar:function(){var FileInstanceId=fluidPlayerClass.getInstanceIdByWrapperId(this.getAttribute("id"));var FilePlayerInstance=fluidPlayerClass.getInstanceById(FileInstanceId);var FilePlayerTag=document.getElementById(FileInstanceId);if(FilePlayerInstance.isCurrentlyPlayingAd&&!FilePlayerTag.paused){FilePlayerInstance.toggleAdCountdown(false)}if(FilePlayerInstance.hasControlBar()){var divVastControls=document.getElementById(FilePlayerInstance.FilePlayerId+"_fluid_controls_container");var fpLogo=document.getElementById(FilePlayerInstance.FilePlayerId+"_logo");if(FilePlayerInstance.displayOptions.layoutControls.controlBar.animated){divVastControls.classList.remove("fade_out");divVastControls.classList.add("fade_in");if(fpLogo){fpLogo.classList.remove("fade_out");fpLogo.classList.add("fade_in")}}else{divVastControls.style.display="block";if(fpLogo){fpLogo.style.display="block"}}}if(!fluidPlayerClass.isTouchDevice()){FilePlayerTag.style.cursor="default"}},linkControlBarUserActivity:function(){var player=this;var FilePlayerTag=document.getElementById(player.FilePlayerId);FilePlayerTag.addEventListener("userInactive",player.hideControlBar);FilePlayerTag.addEventListener("userActive",player.showControlBar);FilePlayerTag.addEventListener("userInactive",player.hideTitle);FilePlayerTag.addEventListener("userActive",player.showTitle)},initMute:function(){var player=this;if(player.displayOptions.layoutControls.mute===true){var FilePlayerTag=document.getElementById(player.FilePlayerId);FilePlayerTag.volume=0}},initLoop:function(){var player=this;var FilePlayerTag=document.getElementById(player.FilePlayerId);if(player.displayOptions.layoutControls.loop!==null){FilePlayerTag.loop=player.displayOptions.layoutControls.loop}else if(FilePlayerTag.loop){player.displayOptions.layoutControls.loop=true}},setBuffering:function(){var player=this;var FilePlayer=document.getElementById(player.FilePlayerId);var bufferBar=document.getElementById(player.FilePlayerId+"_buffered_amount");bufferBar.style.width=0;logProgress=function(){var duration=FilePlayer.duration;if(duration>0){for(var i=0;i<FilePlayer.buffered.length;i++){if(FilePlayer.buffered.start(FilePlayer.buffered.length-1-i)<FilePlayer.currentTime){bufferBar.style.width=FilePlayer.buffered.end(FilePlayer.buffered.length-1-i)/duration*100+"%";if(FilePlayer.buffered.end(FilePlayer.buffered.length-1-i)/duration=="1"){clearInterval(progressInterval)}break}}}};var progressInterval=setInterval(logProgress,500)},createPlaybackList:function(){var player=this;var playbackRates=["x2","x1.5","x1","x0.5"];if(player.displayOptions.layoutControls.playbackRateEnabled){var sourceChangeButton=document.getElementById(player.FilePlayerId+"_fluid_control_playback_rate");var sourceChangeList=document.createElement("div");sourceChangeList.id=player.FilePlayerId+"_fluid_control_File_playback_rate";sourceChangeList.className="fluid_File_playback_rates";sourceChangeList.style.display="none";playbackRates.forEach(function(rate){var sourceChangeDiv=document.createElement("div");sourceChangeDiv.className="fluid_File_playback_rates_item";sourceChangeDiv.innerText=rate;sourceChangeDiv.addEventListener("click",function(event){event.stopPropagation();playbackRate=this.innerText.replace("x","");player.setPlaybackSpeed(playbackRate);player.openCloseFilePlaybackRate()});sourceChangeList.appendChild(sourceChangeDiv)});sourceChangeButton.appendChild(sourceChangeList);sourceChangeButton.addEventListener("click",function(){player.openCloseFilePlaybackRate()})}else{document.getElementById(player.FilePlayerId+"_fluid_control_playback_rate").style.display="none"}},openCloseFilePlaybackRate:function(){var player=this;var sourceChangeList=document.getElementById(this.FilePlayerId+"_fluid_control_File_playback_rate");var sourceChangeListContainer=document.getElementById(this.FilePlayerId+"_fluid_control_playback_rate");if(player.isCurrentlyPlayingAd){sourceChangeList.style.display="none";return}if(sourceChangeList.style.display=="none"){sourceChangeList.style.display="block";var mouseOut=function(){sourceChangeListContainer.removeEventListener("mouseleave",mouseOut);sourceChangeList.style.display="none"};sourceChangeListContainer.addEventListener("mouseleave",mouseOut)}else{sourceChangeList.style.display="none"}},createDownload:function(){var player=this;var downloadOption=document.getElementById(this.FilePlayerId+"_fluid_control_download");if(player.displayOptions.layoutControls.allowDownload){downloadClick=document.createElement("a");downloadClick.id=this.FilePlayerId+"_download";downloadClick.onclick=function(e){var linkItem=this;if(typeof e.stopImmediatePropagation!=="undefined"){e.stopImmediatePropagation()}setInterval(function(){linkItem.download="";linkItem.href=""},100)};downloadOption.appendChild(downloadClick);downloadOption.addEventListener("click",function(){var downloadItem=document.getElementById(player.FilePlayerId+"_download");downloadItem.download=player.originalSrc;downloadItem.href=player.originalSrc;downloadClick.click()})}else{downloadOption.style.display="none"}},theatreToggle:function(){if(this.isInIframe){return}if(this.fullscreenMode){this.fullscreenToggle()}if(this.displayOptions.layoutControls.theatreAdvanced){var elementForTheatre=document.getElementById(this.displayOptions.layoutControls.theatreAdvanced.theatreElement);var theatreClassToApply=this.displayOptions.layoutControls.theatreAdvanced.classToApply;if(elementForTheatre!=null&&theatreClassToApply!=null){if(!this.theatreMode){elementForTheatre.classList.add(theatreClassToApply)}else{elementForTheatre.classList.remove(theatreClassToApply)}this.theatreModeAdvanced=!this.theatreModeAdvanced}else{console.log("[FP_ERROR] Theatre mode elements could not be found, defaulting behaviour.");this.defaultTheatre()}}else{this.defaultTheatre()}this.theatreMode=!this.theatreMode;this.fluidStorage.fluidTheatre=this.theatreMode;var FilePlayer=document.getElementById(this.FilePlayerId);var theatreEvent=this.theatreMode?"theatreModeOn":"theatreModeOff";var event=document.createEvent("CustomEvent");event.initEvent(theatreEvent,false,true);FilePlayer.dispatchEvent(event);return},defaultTheatre:function(){var FileWrapper=document.getElementById("fluid_File_wrapper_"+this.FilePlayerId);if(!this.theatreMode){FileWrapper.classList.add("fluid_theatre_mode");var workingWidth=this.displayOptions.layoutControls.theatreSettings.width;var defaultHorizontalMargin="10px";FileWrapper.style.width=workingWidth;FileWrapper.style.height=this.displayOptions.layoutControls.theatreSettings.height;FileWrapper.style.maxHeight=screen.height+"px";FileWrapper.style.marginTop=this.displayOptions.layoutControls.theatreSettings.marginTop+"px";switch(this.displayOptions.layoutControls.theatreSettings.horizontalAlign){case"center":if(typeof workingWidth=="string"&&workingWidth.substr(workingWidth.length-1)=="%"){defaultHorizontalMargin=(100-parseInt(workingWidth.substring(0,workingWidth.length-1)))/2+"%"}else if(typeof workingWidth=="string"&&workingWidth.substr(workingWidth.length-2)=="px"){defaultHorizontalMargin=(screen.width-parseInt(workingWidth.substring(0,workingWidth.length-2)))/screen.width*100/2+"%"}else{console.log("[FP_ERROR] Theatre width specified invalid.")}FileWrapper.style.left=defaultHorizontalMargin;break;case"right":FileWrapper.style.right=defaultHorizontalMargin;break;case"left":default:FileWrapper.style.left=defaultHorizontalMargin;break}}else{FileWrapper.classList.remove("fluid_theatre_mode");FileWrapper.style.maxHeight="";FileWrapper.style.marginTop="";FileWrapper.style.left="";FileWrapper.style.right="";FileWrapper.style.position="";if(!this.displayOptions.layoutControls.fillToContainer){FileWrapper.style.width=this.originalWidth+"px";FileWrapper.style.height=this.originalHeight+"px"}else{FileWrapper.style.width="100%";FileWrapper.style.height="100%"}}},posterImage:function(){if(this.displayOptions.layoutControls.posterImage){var containerDiv=document.createElement("div");containerDiv.id=this.FilePlayerId+"_fluid_pseudo_poster";containerDiv.className="fluid_pseudo_poster";if(["auto","contain","cover"].indexOf(this.displayOptions.layoutControls.posterImageSize)===-1){console.log("[FP_ERROR] Not allowed value in posterImageSize");return}containerDiv.style.background="url('"+this.displayOptions.layoutControls.posterImage+"') center center / "+this.displayOptions.layoutControls.posterImageSize+" no-repeat black";document.getElementById(this.FilePlayerId).parentNode.insertBefore(containerDiv,null)}},initialiseStreamers:function(){this.detachStreamers();switch(this.displayOptions.layoutControls.mediaType){case"application/dash+xml":if(!this.dashScriptLoaded){this.dashScriptLoaded=true;fluidPlayerClass.requestScript(fluidPlayerScriptLocation+fluidPlayerClass.dashJsScript,this.initialiseDash.bind(this))}else{this.initialiseDash()}break;case"application/x-mpegURL":if(!this.hlsScriptLoaded&&!window.Hls){this.hlsScriptLoaded=true;fluidPlayerClass.requestScript(fluidPlayerScriptLocation+fluidPlayerClass.hlsJsScript,this.initialiseHls.bind(this))}else{this.initialiseHls()}break}},initialiseDash:function(){if(typeof(window.MediaSource||window.WebKitMediaSource)==="function"){var playFile=!this.autoplayAfterAd?this.autoplayAfterAd:this.displayOptions.layoutControls.autoPlay;var dashPlayer=dashjs.MediaPlayer().create();dashPlayer.updateSettings({debug:{logLevel:dashjs.Debug.LOG_LEVEL_NONE}});dashPlayer.initialize(document.getElementById(this.FilePlayerId),this.originalSrc,playFile);this.dashPlayer=dashPlayer}else{this.nextSource();console.log("[FP_ERROR] Media type not supported by this browser. (application/dash+xml)")}},initialiseHls:function(){if(Hls.isSupported()){var hls=new Hls(this.displayOptions.hlsjsConfig);hls.attachMedia(document.getElementById(this.FilePlayerId));hls.loadSource(this.originalSrc);this.hlsPlayer=hls;if(!this.firstPlayLaunched&&this.displayOptions.layoutControls.autoPlay){document.getElementById(this.FilePlayerId).play()}}else{this.nextSource();console.log("[FP_ERROR] Media type not supported by this browser. (application/x-mpegURL)")}},detachStreamers:function(){if(this.dashPlayer){this.dashPlayer.reset();this.dashPlayer=false}else if(this.hlsPlayer){this.hlsPlayer.detachMedia();this.hlsPlayer=false}},nextSource:function(){var sources=document.getElementById(this.FilePlayerId).getElementsByTagName("source");if(sources.length){for(var i=0;i<sources.length-1;i++){if(sources[i].getAttribute("src")==this.originalSrc&&sources[i+1].getAttribute("src")){this.setFileSource(sources[i+1].getAttribute("src"));return}}}return null},inIframe:function(){try{return window.self!==window.top}catch(e){return true}},setPersistentSettings:function(){if(typeof Storage!=="undefined"&&typeof localStorage!=="undefined"){this.fluidStorage=localStorage;if(typeof this.fluidStorage.fluidVolume!=="undefined"&&this.displayOptions.layoutControls.persistentSettings.volume){this.setVolume(this.fluidStorage.fluidVolume);if(typeof this.fluidStorage.fluidMute!=="undefined"&&this.fluidStorage.fluidMute=="true"){this.muteToggle(this.FilePlayerId)}}if(typeof this.fluidStorage.fluidQuality!=="undefined"&&this.displayOptions.layoutControls.persistentSettings.quality){var sourceOption=document.getElementById("source_"+this.FilePlayerId+"_"+this.fluidStorage.fluidQuality);var sourceChangeButton=document.getElementById(this.FilePlayerId+"_fluid_control_File_source");if(sourceOption){sourceOption.click();sourceChangeButton.click()}}if(typeof this.fluidStorage.fluidSpeed!=="undefined"&&this.displayOptions.layoutControls.persistentSettings.speed){this.setPlaybackSpeed(this.fluidStorage.fluidSpeed)}if(typeof this.fluidStorage.fluidTheatre!=="undefined"&&this.fluidStorage.fluidTheatre=="true"&&this.displayOptions.layoutControls.persistentSettings.theatre){this.theatreToggle()}}},init:function(idFilePlayer,options){var player=this;var FilePlayer=document.getElementById(idFilePlayer);FilePlayer.setAttribute("playsinline","");FilePlayer.setAttribute("webkit-playsinline","");player.vastOptions=null;player.FilePlayerId=idFilePlayer;player.originalSrc=player.getCurrentSrc();player.isCurrentlyPlayingAd=false;player.recentWaiting=false;player.latestVolume=1;player.currentFileDuration=0;player.firstPlayLaunched=false;player.suppressClickthrough=false;player.timelinePreviewData=[];player.mainFileCurrentTime=0;player.mainFileDuration=0;player.isTimer=false;player.timer=null;player.timerPool={};player.adList={};player.adPool={};player.adGroupedByRolls={};player.onPauseRollAdPods=[];player.currentOnPauseRollAd="";player.preRollAdsResolved=false;player.preRollAdPods=[];player.preRollAdPodsLength=0;player.preRollVastResolved=0;player.temporaryAdPods=[];player.availableRolls=["preRoll","midRoll","postRoll","onPauseRoll"];player.supportedNonLinearAd=["300x250","468x60","728x90"];player.autoplayAfterAd=true;player.nonLinearDuration=15;player.supportedStaticTypes=["image/gif","image/jpeg","image/png"];player.inactivityTimeout=null;player.isUserActive=null;player.nonLinearVerticalAlign="bottom";player.showTimeOnHover=true;player.initialAnimationSet=true;player.theatreMode=false;player.theatreModeAdvanced=false;player.fullscreenMode=false;player.originalWidth=FilePlayer.offsetWidth;player.originalHeight=FilePlayer.offsetHeight;player.dashPlayer=false;player.hlsPlayer=false;player.dashScriptLoaded=false;player.hlsScriptLoaded=false;player.isPlayingMedia=false;player.isSwitchingSource=false;player.isLoading=false;player.isInIframe=player.inIframe();player.mainFileReadyState=false;player.xmlCollection=[];player.inLineFound=null;player.fluidStorage={};player.fluidPseudoPause=false;player.mobileInfo=fluidPlayerClass.getMobileOs();player.displayOptions={layoutControls:{mediaType:player.getCurrentSrcType(),primaryColor:false,posterImage:false,posterImageSize:"contain",adProgressColor:"#f9d300",playButtonShowing:true,playPauseAnimation:true,closeButtonCaption:"Close",fillToContainer:false,autoPlay:false,preload:"auto",mute:false,loop:null,keyboardControl:true,allowDownload:false,playbackRateEnabled:false,subtitlesEnabled:false,allowTheatre:true,doubleclickFullscreen:true,theatreSettings:{width:"100%",height:"60%",marginTop:0,horizontalAlign:"center",keepPosition:false},theatreAdvanced:false,title:null,logo:{imageUrl:null,position:"top left",clickUrl:null,opacity:1,mouseOverImageUrl:null,imageMargin:"2px",hideWithControls:false,showOverAds:false},controlBar:{autoHide:false,autoHideTimeout:3,animated:true},timelinePreview:{spriteImage:false,spriteRelativePath:false},htmlOnPauseBlock:{html:null,height:null,width:null},layout:"default",playerInitCallback:function(){},persistentSettings:{volume:true,quality:true,speed:true,theatre:true}},vastOptions:{adList:{},skipButtonCaption:"Skip ad in [seconds]",skipButtonClickCaption:'Skip Ad <span class="skip_button_icon"></span>',adText:null,adTextPosition:"top left",adCTAText:"Visit now!",adCTATextPosition:"bottom right",adClickable:true,vastTimeout:5e3,showProgressbarMarkers:false,showPlayButton:false,maxAllowedVastTagRedirects:3,vastAdvanced:{vastLoadedCallback:function(){},noVastFileCallback:function(){},vastFileSkippedCallback:function(){},vastFileEndedCallback:function(){}}},hlsjsConfig:{p2pConfig:{logLevel:false},enableWebVTT:false,enableCEA708Captions:false},captions:{play:"Play",pause:"Pause",mute:"Mute",unmute:"Unmute",fullscreen:"Fullscreen",subtitles:"Subtitles",exitFullscreen:"Exit Fullscreen"}};for(var key in options){if(typeof options[key]=="object"){for(var subKey in options[key]){player.displayOptions[key][subKey]=options[key][subKey]}}else{player.displayOptions[key]=options[key]}}player.setupPlayerWrapper();player.initialiseStreamers();FilePlayer.addEventListener("webkitfullscreenchange",player.recalculateAdDimensions,false);FilePlayer.addEventListener("fullscreenchange",player.recalculateAdDimensions,false);FilePlayer.addEventListener("waiting",player.onRecentWaiting,false);FilePlayer.addEventListener("pause",player.onFluidPlayerPause,false);FilePlayer.addEventListener("loadedmetadata",player.mainFileReady,false);FilePlayer.addEventListener("durationchange",function(){player.currentFileDuration=player.getCurrentFileDuration()},false);FilePlayer.addEventListener("error",player.onErrorDetection,false);FilePlayer.addEventListener("ended",player.onMainFileEnded,false);player.currentFileDuration=player.getCurrentFileDuration();if(isNaN(player.currentFileDuration)){player.currentFileDuration=0}player.setLayout();player.latestVolume=FilePlayer.volume;player.initialAnimationSet=player.displayOptions.layoutControls.playPauseAnimation;player.handleFullscreen();player.initLogo();player.initTitle();player.initMute();player.initLoop();player.displayOptions.layoutControls.playerInitCallback();player.createFileSourceSwitch();player.createSubtitles();player.userActivityChecker();player.setVastList();player.setPersistentSettings();var _play_FilePlayer=FilePlayer.play;FilePlayer.play=function(){var FilePlayerTag=this;var promise=null;var player=fluidPlayerClass.getInstanceById(FilePlayerTag.id);try{promise=_play_FilePlayer.apply(this,arguments);if(promise!==undefined&&promise!==null){promise.then(function(){player.isPlayingMedia=true;clearTimeout(player.promiseTimeout)}).catch(function(error){var isAbortError=typeof error.name!=="undefined"&&error.name==="AbortError";if(isAbortError){}else{player.announceLocalError(202,"Failed to play File.")}clearTimeout(player.promiseTimeout)});player.promiseTimeout=setTimeout(function(){if(player.isPlayingMedia===false){player.announceLocalError(204,"Timeout error. Failed to play File.")}},5e3)}}catch(error){player.announceLocalError(201,"Failed to play File.")}};var _pause_FilePlayer=FilePlayer.pause;FilePlayer.pause=function(){var FilePlayer=this;var player=fluidPlayerClass.getInstanceById(FilePlayer.id);if(player.isPlayingMedia===true){player.isPlayingMedia=false;return _pause_FilePlayer.apply(this,arguments)}else{if(player.isCurrentlyPlayingFile(FilePlayer)){try{player.isPlayingMedia=false;return _pause_FilePlayer.apply(this,arguments)}catch(e){player.announceLocalError(203,"Failed to play File.")}}}};if(player.displayOptions.layoutControls.autoPlay&&!player.dashScriptLoaded&&!player.hlsScriptLoaded){var browserVersion=fluidPlayerClass.getBrowserVersion();if(browserVersion.browserName=="Safari"&&browserVersion.majorVersion>=11){return}FilePlayer.play()}var FileWrapper=document.getElementById("fluid_File_wrapper_"+FilePlayer.id);if(!player.mobileInfo.userOs){FileWrapper.addEventListener("mouseleave",player.handleMouseleave,false);FileWrapper.addEventListener("mouseenter",player.showControlBar,false);FileWrapper.addEventListener("mouseenter",player.showTitle,false)}else{player.hideControlBar.call(FileWrapper);FileWrapper.addEventListener("touchstart",player.showControlBar,false)}if(player.displayOptions.layoutControls.keyboardControl){player.keyboardControl()}if(player.displayOptions.layoutControls.controlBar.autoHide){player.linkControlBarUserActivity()}try{[].forEach.call(FilePlayerTag.textTracks,function(textTrack){textTrack.mode="hidden"})}catch(e){}},play:function(){var FilePlayer=document.getElementById(this.FilePlayerId);if(FilePlayer.paused){this.playPauseToggle(FilePlayer)}return true},pause:function(){var FilePlayer=document.getElementById(this.FilePlayerId);if(!FilePlayer.paused){this.playPauseToggle(FilePlayer)}return true},skipTo:function(time){var FilePlayer=document.getElementById(this.FilePlayerId);FilePlayer.currentTime=time},setPlaybackSpeed:function(speed){if(!this.isCurrentlyPlayingAd){var FilePlayer=document.getElementById(this.FilePlayerId);FilePlayer.playbackRate=speed;this.fluidStorage.fluidSpeed=speed}},setVolume:function(passedVolume){var FilePlayer=document.getElementById(this.FilePlayerId);FilePlayer.volume=passedVolume;this.latestVolume=passedVolume;this.fluidStorage.fluidVolume=passedVolume},isCurrentlyPlayingFile:function(instance){return instance&&instance.currentTime>0&&!instance.paused&&!instance.ended&&instance.readyState>2},setHtmlOnPauseBlock:function(passedHtml){if(typeof passedHtml!="object"||typeof passedHtml.html=="undefined"){return false}var htmlBlock=document.getElementById(this.FilePlayerId+"_fluid_html_on_pause");if(!htmlBlock){var FilePlayer=document.getElementById(player.FilePlayerId);var containerDiv=document.createElement("div");containerDiv.id=player.FilePlayerId+"_fluid_html_on_pause";containerDiv.className="fluid_html_on_pause";containerDiv.style.display="none";containerDiv.innerHTML=passedHtml.html;containerDiv.onclick=function(){player.playPauseToggle(FilePlayer)};if(passedHtml.width){containerDiv.style.width=passedHtml.width+"px"}if(passedHtml.height){containerDiv.style.height=passedHtml.height+"px"}FilePlayer.parentNode.insertBefore(containerDiv,null)}else{htmlBlock.innerHTML=passedHtml.html;if(passedHtml.width){htmlBlock.style.width=passedHtml.width+"px"}if(passedHtml.height){htmlBlock.style.height=passedHtml.height+"px"}}},toggleControlBar:function(show){var controlBar=document.getElementById(this.FilePlayerId+"_fluid_controls_container");if(show){controlBar.className+=" initial_controls_show"}else{controlBar.className=controlBar.className.replace(" initial_controls_show","")}},toggleFullscreen:function(fullscreen){if(this.fullscreenMode!=fullscreen){if(fullscreen&&this.theatreMode){this.theatreToggle()}this.fullscreenToggle()}},on:function(eventCall,functionCall){var FilePlayer=document.getElementById(this.FilePlayerId);var player=this;switch(eventCall){case"play":FilePlayer.onplay=functionCall;break;case"seeked":FilePlayer.onseeked=functionCall;break;case"ended":FilePlayer.onended=functionCall;break;case"pause":FilePlayer.addEventListener("pause",function(){if(!player.fluidPseudoPause){functionCall()}});break;case"playing":FilePlayer.addEventListener("playing",function(){functionCall()});break;case"theatreModeOn":FilePlayer.addEventListener("theatreModeOn",function(){functionCall()});break;case"theatreModeOff":FilePlayer.addEventListener("theatreModeOff",function(){functionCall()});break;default:console.log("[FP_ERROR] Event not recognised");break}},toggleLogo:function(logo){if(typeof logo!="object"||!logo.imageUrl){return false}var logoBlock=document.getElementById(this.FilePlayerId+"_logo");this.displayOptions.layoutControls.logo.imageUrl=logo.imageUrl?logo.imageUrl:null;this.displayOptions.layoutControls.logo.position=logo.position?logo.position:"top left";this.displayOptions.layoutControls.logo.clickUrl=logo.clickUrl?logo.clickUrl:null;this.displayOptions.layoutControls.logo.opacity=logo.opacity?logo.opacity:1;this.displayOptions.layoutControls.logo.mouseOverImageUrl=logo.mouseOverImageUrl?logo.mouseOverImageUrl:null;this.displayOptions.layoutControls.logo.imageMargin=logo.imageMargin?logo.imageMargin:"2px";this.displayOptions.layoutControls.logo.hideWithControls=logo.hideWithControls?logo.hideWithControls:false;this.displayOptions.layoutControls.logo.showOverAds=logo.showOverAds?logo.showOverAds:false;if(logoBlock){logoBlock.remove()}this.initLogo()}};