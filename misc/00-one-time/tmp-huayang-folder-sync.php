<?php

$dirs = <<<EOF
MFStar-模范学院第100期佳佳JiaJia大尺度套图-50P-
MFStar-模范学院第101期唐琪儿-51P-
MFStar-模范学院第102期傲娇萌萌大尺度套图-50P-
MFStar-模范学院第103期悦爷妖精-45P-
MFStar-模范学院第104期Hana妹-52P-
MFStar-模范学院第105期傲娇萌萌大尺度套图-45P-
MFStar-模范学院第106期唐琪儿-53P-
MFStar-模范学院第107期Sugar梁莹-50P-
MFStar-模范学院第108期姗姗-51P-
MFStar-模范学院第109期Hana妹-40P-
MFStar-模范学院第10期夏小秋-51P-
MFStar-模范学院第110期悦爷妖精-52P-
MFStar-模范学院第111期唐琪儿-50P-
MFStar-模范学院第112期Hana妹-56P-
MFStar-模范学院第113期璐璐-41P-
MFStar-模范学院第114期傲娇萌萌-51P-
MFStar-模范学院第115期昆熙Quincey-40P-
MFStar-模范学院第116期宅兔兔-42P-
MFStar-模范学院第117期栗子Riz-43P-
MFStar-模范学院第118期宅兔兔-41P-
MFStar-模范学院第119期宅兔兔-31P-
MFStar-模范学院第11期佘贝拉bella-60P-
MFStar-模范学院第120期静静tobey大尺度套图-42P-
MFStar-模范学院第121期李可可-42P-
MFStar-模范学院第123期宅兔兔-31P-
MFStar-模范学院第124期Jennanni_Jen大尺度套图-45P-
MFStar-模范学院第125期Evelyn艾莉-52P-
MFStar-模范学院第126期卤蛋luna-72P-
MFStar-模范学院第127期李可可大尺度套图-42P-
MFStar-模范学院第128期佟蔓baby-45P-
MFStar-模范学院第129期佳佳JiaJia-45P-
MFStar-模范学院第12期徐cake-50P-
MFStar-模范学院第13期徐cake-50P-
MFStar-模范学院第140期黄楽然大尺度套图-46P-
MFStar-模范学院第148期李可可-34P-
MFStar-模范学院第149期冷不丁大尺度套图-51P-
MFStar-模范学院第14期佘贝拉bella-50P-
MFStar-模范学院第150期静静tobey大尺度套图-39P-
MFStar-模范学院第157期温心怡大尺度套图-31P-
MFStar-模范学院第158期SOLO-尹菲-44P-
MFStar-模范学院第159期冯木木-32P-
MFStar-模范学院第15期夏瑶baby大尺度套图-50P-
MFStar-模范学院第160期佳佳JiaJia-42P-
MFStar-模范学院第161期韩秀冉-36P-
MFStar-模范学院第16期佘贝拉bella-50P-
MFStar-模范学院第171期黄楽然套图-38P-
MFStar-模范学院第172期小姿2002套图-51P-
MFStar-模范学院第173期李可可套图-50P-
MFStar-模范学院第174期佳佳JiaJia套图-40P-
MFStar-模范学院第175期仓井优香大尺度套图-40P-
MFStar-模范学院第176期徐微微套图-41P-
MFStar-模范学院第177期徐cake套图-30P-
MFStar-模范学院第178期小姿2002套图-42P-
MFStar-模范学院第179期Sugar梁莹套图-39P-
MFStar-模范学院第17期夏小秋秋秋大尺度套图-52P-
MFStar-模范学院第180期徐微微套图-32P-
MFStar-模范学院第181期Manuela玛鲁娜套图-41P-
MFStar-模范学院第182期Evelyn艾莉套图-40P-
MFStar-模范学院第183期blueblue77套图-40P-
MFStar-模范学院第184期janny套图-45P-
MFStar-模范学院第185期胡润曦大尺度套图-40P-
MFStar-模范学院第186期李可可大尺度套图-43P-
MFStar-模范学院第187期徐微微Mia套图-40P-
MFStar-模范学院第188期夏笑笑套图-40P-
MFStar-模范学院第189期草莓兔兔大尺度套图-31P-
MFStar-模范学院第18期Milk楚楚-42P-
MFStar-模范学院第190期程程CC大尺度套图-32P-
MFStar-模范学院第191期任莹樱大尺度套图-41P-
MFStar-模范学院第192期仓井优香大尺度套图-40P-
MFStar-模范学院第193期徐微微Mia套图-40P-
MFStar-模范学院第194期Flower朱可儿套图-40P-
MFStar-模范学院第195期张雨萌套图-33P-
MFStar-模范学院第196期宝儿fox大尺度套图-42P-
MFStar-模范学院第197期顾奈奈套图-49P-
MFStar-模范学院第198期仓井优香套图-41P-
MFStar-模范学院第199期宝儿fox套图-41P-
MFStar-模范学院第19期熊吖BOBO-50P-
MFStar-模范学院第1期许诺Sabrina-48P-
MFStar-模范学院第200期妞妞koko大尺度套图-30P-
MFStar-模范学院第201期模特合集套图-43P-
MFStar-模范学院第202期佳佳JiaJia套图-42P-
MFStar-模范学院第203期Baileys香儿套图-66P-
MFStar-模范学院第204期Flower朱可儿套图-55P-
MFStar-模范学院第205期奈美nana套图-50P-
MFStar-模范学院第206期Flower朱可儿套图-50P-
MFStar-模范学院第207期Flower朱可儿套图-58P-
MFStar-模范学院第208期Betty林子欣套图-43P-
MFStar-模范学院第209期Flower朱可儿大尺度套图-52P-
MFStar-模范学院第20期徐cake-52P-
MFStar-模范学院第210期仓井优香大尺度套图-57P-
MFStar-模范学院第211期林子欣大尺度套图-40P-
MFStar-模范学院第212期林子欣套图-51P-
MFStar-模范学院第213期糯美子Mini套图-61P-
MFStar-模范学院第214期仓井优香套图-65P-
MFStar-模范学院第215期林子欣大尺度套图-64P-
MFStar-模范学院第216期糯美子Mini大尺度套图-52P-
MFStar-模范学院第217期Flower朱可儿大尺度套图-90P-
MFStar-模范学院第218期糯美子Mini大尺度套图-66P-
MFStar-模范学院第219期Betty林子欣套图-53P-
MFStar-模范学院第21期夏茉GIGI-51P-
MFStar-模范学院第220期糯美子Mini大尺度套图-52P-
MFStar-模范学院第221期小牛奶套图-44P-
MFStar-模范学院第222期林子欣套图-53P-
MFStar-模范学院第223期糯美子Mini套图-50P-
MFStar-模范学院第224期Flower朱可儿套图-50P-
MFStar-模范学院第225期糯美子Mini套图-44P-
MFStar-模范学院第226期林子欣套图-45P-
MFStar-模范学院第227期鲍妮boonie套图-35P-
MFStar-模范学院第228期林子欣大尺度套图-57P-
MFStar-模范学院第229期仓井优香套图-36P-
MFStar-模范学院第22期Moa小姐-53P-
MFStar-模范学院第230期Betty林子欣套图-62P-
MFStar-模范学院第231期小牛奶大尺度套图-51P-
MFStar-模范学院第232期糯美子Mini大尺度套图-50P-
MFStar-模范学院第233期Flower朱可儿大尺度套图-77P-
MFStar-模范学院第234期任莹樱大尺度套图-58P-
MFStar-模范学院第235期蓝夏Akasha大尺度套图-60P-
MFStar-模范学院第236期多香子大尺度套图-40P-
MFStar-模范学院第237期徐cake大尺度套图-52P-
MFStar-模范学院第238期林子欣套图-51P-
MFStar-模范学院第239期糯美子套图-66P-
MFStar-模范学院第23期佘贝拉bella-56P-
MFStar-模范学院第240期胡润曦大尺度套图-40P-
MFStar-模范学院第241期韩子萱套图-40P-
MFStar-模范学院第242期蓝夏Akasha大尺度套图-55P-
MFStar-模范学院第243期程程CC大尺度套图-50P-
MFStar-模范学院第244期模特合集大尺度套图-60P-
MFStar-模范学院第245期Betty林子欣大尺度套图-52P-
MFStar-模范学院第246期徐微微套图-61P-
MFStar-模范学院第247期恩率大尺度套图-51P-
MFStar-模范学院第248期Dreamy小乔大尺度套图-44P-
MFStar-模范学院第249期朱可儿大尺度套图-60P-
MFStar-模范学院第24期徐cake-50P-
MFStar-模范学院第250期徐微微大尺度套图-54P-
MFStar-模范学院第251期玉兔miki大尺度套图-51P-
MFStar-模范学院第252期小姿大尺度套图-50P-
MFStar-模范学院第253期Dreamy小乔大尺度套图-39P-
MFStar-模范学院第254期朱可儿Flower大尺度套图-75P-
MFStar-模范学院第255期徐微微大尺度套图-52P-
MFStar-模范学院第256期模特合集套图-70P-
MFStar-模范学院第257期Evelyn艾莉大尺度套图-70P-
MFStar-模范学院第257期Evelyn艾莉套图-52P-
MFStar-模范学院第258期李可可大尺度套图-52P-
MFStar-模范学院第259期朱可儿Flower大尺度套图-73P-
MFStar-模范学院第25期伊小七MoMo-52P-
MFStar-模范学院第260期徐微微大尺度套图-50P-
MFStar-模范学院第261期玉兔miki大尺度套图-61P-
MFStar-模范学院第262期恩率babe套图-50P-
MFStar-模范学院第263期朱可儿Flower大尺度套图-61P-
MFStar-模范学院第264期玉兔miki大尺度套图-65P-
MFStar-模范学院第265期玉兔miki大尺度套图-65P-
MFStar-模范学院第266期徐微微mia大尺度套图-50P-
MFStar-模范学院第267期朱可儿Flower大尺度套图-70P-
MFStar-模范学院第268期徐微微大尺度套图-36P-
MFStar-模范学院第269期恩率大尺度套图-40P-
MFStar-模范学院第26期Milk楚楚大尺度套图-50P-
MFStar-模范学院第270期郭忆然大尺度套图-42P-
MFStar-模范学院第271期朱可儿Flower大尺度套图-54P-
MFStar-模范学院第272期玉兔大尺度套图-70P-
MFStar-模范学院第273期徐微微套图-64P-
MFStar-模范学院第274期玉兔miki套图-62P-
MFStar-模范学院第275期糯美子大尺度套图-70P-
MFStar-模范学院第276期Evelyn艾莉套图-48P-
MFStar-模范学院第277期玉兔miki大尺度套图-60P-
MFStar-模范学院第278期朱可儿Flower大尺度套图-80P-
MFStar-模范学院第278期李可可大尺度套图-41P-
MFStar-模范学院第27期熊吖BOBO-54P-
MFStar-模范学院第280期玉兔miki大尺度套图-69P-
MFStar-模范学院第286期徐微微大尺度套图-61P-
MFStar-模范学院第286期黄楽然大尺度套图-53P-
MFStar-模范学院第288期糯美子Mini大尺度套图-66P-
MFStar-模范学院第289期诗诗kiki大尺度套图-55P-
MFStar-模范学院第28期徐cake大尺度套图-52P-
MFStar-模范学院第290期徐微微大尺度套图-63P-
MFStar-模范学院第291期蓝夏Akasha大尺度套图-69P-
MFStar-模范学院第292期玉兔miki大尺度套图-80P-
MFStar-模范学院第293期糯美子Mini大尺度套图-56P-
MFStar-模范学院第294期诗诗kiki大尺度套图-41P-
MFStar-模范学院第295期玉兔miki大尺度套图-57P-
MFStar-模范学院第296期dodo大尺度套图-39P-
MFStar-模范学院第297期徐微微大尺度套图-56P-
MFStar-模范学院第298期玉兔miki大尺度套图-46P-
MFStar-模范学院第299期软软酱大尺度套图-48P-
MFStar-模范学院第29期伊小七MoMo大尺度套图-51P-
MFStar-模范学院第2期柳侑绮-51P-
MFStar-模范学院第300期果儿Victoria大尺度套图-50P-
MFStar-模范学院第301期白茹雪大尺度套图-40P-
MFStar-模范学院第302期糯美子Mini大尺度套图-67P-
MFStar-模范学院第303期方子萱大尺度套图-49P-
MFStar-模范学院第304期夏天Sienna大尺度套图-50P-
MFStar-模范学院第305期蛋糕Cake大尺度套图-40P-
MFStar-模范学院第306期糯美子Mini大尺度套图-68P-
MFStar-模范学院第307期小宣fancy大尺度套图-38P-
MFStar-模范学院第307期方子萱大尺度套图-45P-
MFStar-模范学院第309期软软Roro大尺度套图-46P-
MFStar-模范学院第30期熊吖BOBO-51P-
MFStar-模范学院第310期玉兔miki大尺度套图-52P-
MFStar-模范学院第311期朱可儿Flower大尺度套图-56P-
MFStar-模范学院第312期yoo优优套图-49P-
MFStar-模范学院第313期诗诗kiki大尺度套图-38P-
MFStar-模范学院第314期蛋糕Cake大尺度套图-40P-
MFStar-模范学院第315期言沫大尺度套图-51P-
MFStar-模范学院第316期徐微微大尺度套图-48P-
MFStar-模范学院第317期yoo优优套图-47P-
MFStar-模范学院第318期久久Aimee大尺度套图-53-
MFStar-模范学院第319期夏天Sienna大尺度套图-58P-
MFStar-模范学院第31期佘贝拉bella-51P-
MFStar-模范学院第320期璀灿大尺度套图-60P-
MFStar-模范学院第321期张小妮大尺度套图-58P-
MFStar-模范学院第322期模特合集大尺度套图-50P-
MFStar-模范学院第323期yoo优优大尺度套图-44P-
MFStar-模范学院第324期良人非爱人大尺度套图-39P-
MFStar-模范学院第325期言沫套图-61P-
MFStar-模范学院第326期yoo优优大尺度套图-48P-
MFStar-模范学院第327期苏雨彤大尺度套图-55P-
MFStar-模范学院第328期方子萱大尺度套图-57P-
MFStar-模范学院第329期夏天Sienna大尺度套图-47P-
MFStar-模范学院第32期兜豆靓Youlina大尺度套图-42P-
MFStar-模范学院第330期久久Aimee大尺度套图-54P-
MFStar-模范学院第331期薛琪琪大尺度套图-49P-
MFStar-模范学院第332期方子萱套图-71-
MFStar-模范学院第333期yoo优优套图-59P-
MFStar-模范学院第334期苏雨彤套图-55P-
MFStar-模范学院第335期白茹雪大尺度套图-49P-
MFStar-模范学院第336期久久Aimee大尺度套图-46P-
MFStar-模范学院第337期yoo优优套图-55P-
MFStar-模范学院第338期蛋糕Cake套图-45P-
MFStar-模范学院第339期薛琪琪大尺度套图-78P-
MFStar-模范学院第33期Evelyn艾莉大尺度套图-52P-
MFStar-模范学院第340期方子萱套图-61P-
MFStar-模范学院第341期陈一涵套图-40P-
MFStar-模范学院第342期陈小诺大尺度套图-37P-
MFStar-模范学院第343期Riri大尺度套图-50P-
MFStar-模范学院第344期薛琪琪套图-59P-
MFStar-模范学院第345期林小艺大尺度套图-54P-
MFStar-模范学院第346期苏雨彤套图-45P-
MFStar-模范学院第347期美七Mia大尺度套图-41P-
MFStar-模范学院第348期模特合集大尺度套图-39P-
MFStar-模范学院第349期yoo优优套图-50P-
MFStar-模范学院第34期徐cake-50P-
MFStar-模范学院第350期方子萱套图-66P-
MFStar-模范学院第351期白茹雪套图-44P-
MFStar-模范学院第352期韩静安套图-48P-
MFStar-模范学院第353期美七Mia大尺度套图-45P-
MFStar-模范学院第354期薛琪琪大尺度套图-47P-
MFStar-模范学院第355期yoo优优套图-55P-
MFStar-模范学院第356期苏雨彤大尺度套图-45P-
MFStar-模范学院第357期陈一涵套图-41P-
MFStar-模范学院第358期陈小诺大尺度套图-49P-
MFStar-模范学院第359期薛琪琪大尺度套图-49P-
MFStar-模范学院第35期李思宁大尺度套图-50P-
MFStar-模范学院第360期模特合集套图-40P-
MFStar-模范学院第361言沫大尺度套图-38P-
MFStar-模范学院第362期梦梵大尺度套图-54P-
MFStar-模范学院第363期文芮jeninfer大尺度套图-49P-
MFStar-模范学院第364期yoo优优大尺度套图-56P-
MFStar-模范学院第365期薛琪琪大尺度套图-46P-
MFStar-模范学院第366期林小艺大尺度套图-55P-
MFStar-模范学院第367期苏雨彤大尺度套图-51P-
MFStar-模范学院第368期韩静安大尺度套图-51P-
MFStar-模范学院第369期yoo优优套图-64P-
MFStar-模范学院第36期徐cake-50P-
MFStar-模范学院第370期仓井优香套图-50P-
MFStar-模范学院第37期Moa小姐-41P-
MFStar-模范学院第38期佘贝拉bella-60P-
MFStar-模范学院第39期夏茉GIGI-51P-
MFStar-模范学院第3期刘飞儿Faye大尺度套图-46P-
MFStar-模范学院第40期Evelyn艾莉-51P-
MFStar-模范学院第41期刘飞儿-52P-
MFStar-模范学院第42期兜豆靓Youlina-50P-
MFStar-模范学院第43期黄佳丽-41P-
MFStar-模范学院第44期熊吖BOBO-50P-
MFStar-模范学院第45期Cheryl青树-50P-
MFStar-模范学院第46期松果儿大尺度套图-51P-
MFStar-模范学院第47期Evelyn艾莉-53P-
MFStar-模范学院第48期兜豆靓Youlina-51P-
MFStar-模范学院第49期徐cake大尺度套图-51P-
MFStar-模范学院第4期Manuela玛鲁娜-48P-
MFStar-模范学院第50期夏小秋秋秋-52P-
MFStar-模范学院第51期佘贝拉bella-53P-
MFStar-模范学院第52期沈佳熹大尺度套图-57P-
MFStar-模范学院第54期刘飞儿-50P-
MFStar-模范学院第55期赵小米Kitty-50P-
MFStar-模范学院第56期徐cake-52P-
MFStar-模范学院第57期Evelyn艾莉-50P-
MFStar-模范学院第58期艾栗栗大尺度套图-55P-
MFStar-模范学院第59期徐cake-50P-
MFStar-模范学院第5期夏小秋秋秋大尺度套图-45P-
MFStar-模范学院第60期佳佳JiaJia大尺度套图-56P-
MFStar-模范学院第61期Evelyn艾莉-55P-
MFStar-模范学院第62期王梓童Doirs大尺度套图-50P-
MFStar-模范学院第63期电竞唐嫣大尺度套图-60P-
MFStar-模范学院第64期思淇Sukiii-52P-
MFStar-模范学院第65期夏玲蔓大尺度套图-50P-
MFStar-模范学院第66期陈思雨-50P-
MFStar-模范学院第67期Evelyn艾莉-50P-
MFStar-模范学院第68期韩子萱-50P-
MFStar-模范学院第69期赵小米Kitty-50P-
MFStar-模范学院第6期模特合集大尺度套图-62P-
MFStar-模范学院第70期徐cake-51P-
MFStar-模范学院第71期傲娇萌萌大尺度套图-50P-
MFStar-模范学院第72期佘贝拉bella大尺度套图-53P-
MFStar-模范学院第73期Evelyn艾莉-58P-
MFStar-模范学院第74期猩一大尺度套图-40P-
MFStar-模范学院第75期佳佳JiaJia大尺度套图-52P-
MFStar-模范学院第76期慕羽茜-52P-
MFStar-模范学院第77期佟蔓baby-53P-
MFStar-模范学院第78期卤蛋luna-51P-
MFStar-模范学院第79期粉芭比VV-50P-
MFStar-模范学院第7期Manuela玛鲁娜-46P-
MFStar-模范学院第80期Wendy智秀-50P-
MFStar-模范学院第81期姗姗就打奥特曼大尺度套图-50P-
MFStar-模范学院第82期悦爷妖精-51P-
MFStar-模范学院第83期草莓兔兔大尺度套图-30P-
MFStar-模范学院第84期Sugar梁莹-52P-
MFStar-模范学院第85期程程CC-60P-
MFStar-模范学院第86期松果儿大尺度套图-50P-
MFStar-模范学院第87期唐琪儿Beauty-61P-
MFStar-模范学院第88期萌琪琪大尺度套图-50P-
MFStar-模范学院第89期冷不丁大尺度套图-52P-
MFStar-模范学院第8期沈梦瑶-50P-
MFStar-模范学院第90期伊小七MoMo-51P-
MFStar-模范学院第91期昆熙Quincey-50P-
MFStar-模范学院第92期唐琪儿大尺度套图-51P-
MFStar-模范学院第94期佳佳JiaJia大尺度套图-50P-
MFStar-模范学院第95期姗姗就打奥特曼-47P-
MFStar-模范学院第96期伊小七MoMo-60P-
MFStar-模范学院第97期松果儿-47P-
MFStar-模范学院第98期伊小七-47P-
MFStar-模范学院第99期Evelyn艾莉-41P-
MFStar-模范学院第9期桃小兔-40P-
EOF;

// 重命名文件夹用tujigu的名字，copy desc 和 tags，重命名thumbnail
if (!function_exists('str_starts_with')) {
    function str_starts_with($haystack, $needle) {
        return (string)$needle !== '' && strncmp($haystack, $needle, strlen($needle)) === 0;
    }
}

function find_between($str, $startDelimiter, $endDelimiter) {
    $contents = array();
    $startDelimiterLength = strlen($startDelimiter);
    $endDelimiterLength = strlen($endDelimiter);
    $startFrom = $contentStart = $contentEnd = 0;
    while (false !== ($contentStart = strpos($str, $startDelimiter, $startFrom))) {
      $contentStart += $startDelimiterLength;
      $contentEnd = strpos($str, $endDelimiter, $contentStart);
      if (false === $contentEnd) {
        break;
      }
      $contents[] = substr($str, $contentStart, $contentEnd - $contentStart);
      $startFrom = $contentEnd + $endDelimiterLength;
    }
  
    return $contents;
}

$folder_full_path = isset($argv[1]) ? $argv[1] : null;

if(empty($folder_full_path)) {
    echo "---- Must have a full folder path as the param! \n";
    exit;
}

$scan = scandir($folder_full_path);
foreach($scan as $folder_name) {
   if (is_dir("$folder_full_path/$folder_name") && $folder_name!='.' && $folder_name!='..') {
        $the_full_path = "$folder_full_path/$folder_name";
        echo "------------------------- \n";
        echo "-- Current folder: $folder_name \n";
        // Get cuurent folder vol number
        $l_folder_name = strtolower($folder_name);
        $v_arr = explode(' ',$l_folder_name);
        $vol = $v_arr[1];

        $vol = str_replace('vol.', '', $vol);
        // Go to origin path to get folder name with the same vol num
        $origin = getOriginFolderByVol($vol);
        echo print_r($origin,1) . "\n"; 
        
        if(!empty($origin)) {
            // copy desc.txt and tags.txt from origin folder
            echo "copy " . $origin['full_path'] . "/desc.txt " . $the_full_path . "/\n";
            copy($origin['full_path'] . "/desc.txt", $the_full_path . "/desc.txt");
            
            // copy($origin['full_path'] . "/tags.txt", $the_full_path . "/tags.txt");

            // Gen new tags
            $tags_str = file_get_contents($origin['full_path'] . "/tags.txt");
            $tags = explode(',', $tags_str);
            if(! in_array('MFStar', $tags) && ! in_array('mfstar', $tags)) {
                $tags[] = 'MFStar';
            }
            if(! in_array( $origin['model'], $tags ) ) {
                $tags[] = $origin['model'];
            }
            $new_tags_str = implode(',', $tags);
            $new_tags_str = str_replace('mfstar', 'MFStar', $new_tags_str);
            echo "---- New tags: $new_tags_str \n";
            // create tags.txt
            echo "file_put_contents($the_full_path/tags.txt, $new_tags_str) \n";
            file_put_contents($the_full_path.'/tags.txt', $new_tags_str);

            // create a new empty dl.txt in current folder
            echo "file_put_contents($the_full_path/dl.txt, '') \n";
            file_put_contents($the_full_path.'/dl.txt', '');

            // If no thumbnail.jpg, rename last image to thumbnail.jpg
            $scan2 = scandir($the_full_path);
            $images = [];
            foreach($scan2 as $file) {
                $origin_file_full = $the_full_path . '/' . $file;
                if ( is_file($origin_file_full) && @is_array(getimagesize($origin_file_full)) ) {
                    $images[] = $file;
                }
            }
            echo 'rename('. $the_full_path . '/' .$images[count($images) - 1] . ', ' . $the_full_path . '/thumbnail.jpg' .  "\n\n";
            rename($the_full_path . '/' . $images[count($images) - 1] , $the_full_path . '/thumbnail.jpg');    

            // rename current folder to the origin folder name
            echo "rename $the_full_path to $folder_full_path/MFStar模范学院-". $vol. '-'. $origin['main'] . "\n\n";
            rename($the_full_path, $folder_full_path . '/MFStar模范学院-' . $vol. '-'. $origin['main']);
        }
   }
}



function getOriginFolderByVol($vol_num) {
    global $dirs;
    $vol_num = '第' . (int)$vol_num . '期';
// echo "vol_num = $vol_num \n";
    $origin_folders = '/mnt/nas/jw-photos/qqc';
    // $scan = scandir($origin_folders);
    $scan = explode("\r\n", $dirs);
    $folder_info = [];
    
    foreach($scan as $folder_name) {        
        if (is_dir("$origin_folders/$folder_name") && $folder_name!='.' && $folder_name!='..') {
            $l_folder_name = strtolower($folder_name);
            // echo "l_folder: $l_folder_name \n";
            
            if(strpos($l_folder_name, $vol_num) !== false) {
                $l_folder_name = str_replace('---','-',$l_folder_name);
                $l_folder_name = str_replace('《','-',$l_folder_name);
                $l_folder_name = str_replace('》','-',$l_folder_name);
                $l_folder_name = str_replace('_-','_',$l_folder_name);
                $folder_info['name'] = $l_folder_name;
                $folder_info['full_path'] = $origin_folders  . '/' . $folder_name;

                $tt = find_between($l_folder_name, '期', '-');
                // if(str_starts_with($tt[0], 'vol.')) {
                //     $ss = find_between($l_folder_name, '-', '-');
                //     $folder_info['model'] = $ss[0];
                //     $yy = find_between($l_folder_name, '-', 'p-');
                //     $folder_info['main'] = $yy[0].'P';
                // }
                // else {
                    $ss = explode('大尺度套图', $tt[0]);
                    $folder_info['model'] = $ss[0];
                    $folder_info['main'] = $tt[0];
                // }
            }
        }
    }

    return $folder_info;
}